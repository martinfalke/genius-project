(this["webpackJsonplistify-project"]=this["webpackJsonplistify-project"]||[]).push([[0],{100:function(e,t,a){},101:function(e,t,a){},102:function(e,t,a){},103:function(e,t,a){},106:function(e,t,a){},107:function(e,t,a){},108:function(e,t,a){},109:function(e,t,a){},112:function(e,t,a){},113:function(e,t,a){"use strict";a.r(t);var n,r,s,c,i,l,o=a(0),u=a.n(o),b=a(31),d=a.n(b),j=a(27),p=a(41),O=a(3),f=a(9),h="AUTH_INIT_TEST",m="AUTH_SPOTIFY",x="AUTH_SPOTIFY_ERROR",y="AUTH_SPOTIFY_SET_STATE",g="AUTH_SPOTIFY_LOGOUT",k=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(f.a)({type:e},t)},v=function(e,t){return function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,n=arguments.length>1?arguments[1]:void 0;return t.hasOwnProperty(n.type)?t[n.type](a,n):a}},_={status:null,spotify:{token:null,expires_in:0,spotify_string:null,error:null}},S=v(_,(n={},Object(O.a)(n,h,(function(e,t){return Object(f.a)(Object(f.a)({},e),{},{status:"OK"})})),Object(O.a)(n,m,(function(e,t){var a;return localStorage.setItem("spotifyToken",t.token),localStorage.setItem("spotifyExpiration",(a=3595,new Date(Date.now()+1e3*a)).toUTCString()),Object(f.a)(Object(f.a)({},e),{},{spotify:{token:t.token,expires_in:t.expires_in||e.spotify.expires_in,spotify_string:e.spotify.spotify_string,error:null}})})),Object(O.a)(n,x,(function(e,t){return Object(f.a)(Object(f.a)({},e),{},{spotify:{token:null,expires_in:null,spotify_string:e.spotify.spotify_string,error:t.error}})})),Object(O.a)(n,y,(function(e,t){return localStorage.setItem("spotifyState",t.spotify_string),Object(f.a)(Object(f.a)({},e),{},{spotify:Object(f.a)(Object(f.a)({},e.spotify),{},{spotify_string:t.spotify_string})})})),Object(O.a)(n,g,(function(e,t){return localStorage.removeItem("spotifyToken"),localStorage.removeItem("spotifyExpiration"),Object(f.a)({},_)})),n)),T="FBASE_INIT_COMPLETED",I="FBASE_SET_UID",P="FBASE_SIGN_OUT",E="FBASE_SIGN_OUT_SUCCESS",N="FBASE_SIGN_OUT_ERROR",A={status:null,app:null,auth:null,uid:""},w=v(A,(r={},Object(O.a)(r,T,(function(e,t){return Object(f.a)(Object(f.a)({},e),{},{status:"OK",app:t.payload.app,auth:t.payload.auth})})),Object(O.a)(r,I,(function(e,t){return Object(f.a)(Object(f.a)({},e),{},{uid:t.uid})})),Object(O.a)(r,P,(function(e,t){return Object(f.a)({},A)})),Object(O.a)(r,E,(function(e,t){return Object(f.a)({},A)})),Object(O.a)(r,N,(function(e,t){return Object(f.a)(Object(f.a)({},A),{},{status:"ERROR"})})),r)),R="SEARCH_INIT_TEST",L="SEARCH_GET",C="SEARCH_GET_ERROR",F="SEARCH_GET_SUCCESS",U="SEARCH_NEXT",D="SEARCH_PREV",Y="SEARCH_TAB_VISBILITY",M={status:null,latestQuery:null,activePage:null,isExact:!1,resultTypes:["track"],isTabVisible:!1},G=v(M,(s={},Object(O.a)(s,R,(function(e,t){return Object(f.a)(Object(f.a)({},e),{},{status:"initialized"})})),Object(O.a)(s,L,(function(e,t){return Object(f.a)(Object(f.a)({},e),{},{status:"Query accepted"})})),Object(O.a)(s,F,(function(e,t){return Object(f.a)(Object(f.a)({},e),{},{activePage:t.payload,status:"API OK"})})),Object(O.a)(s,C,(function(e,t){return Object(f.a)(Object(f.a)({},e),{},{activePage:M.activePage,status:"API ERROR"})})),Object(O.a)(s,U,(function(e,t){return Object(f.a)(Object(f.a)({},e),{},{status:"Next Page Found"})})),Object(O.a)(s,D,(function(e,t){return Object(f.a)(Object(f.a)({},e),{},{status:"Prev Page Found"})})),Object(O.a)(s,Y,(function(e,t){return Object(f.a)(Object(f.a)({},e),{},{isTabVisible:t.visible})})),Object(O.a)(s,g,(function(e,t){return Object(f.a)({},M)})),s)),V="USER_INIT",B="USER_GET",K="USER_GET_SUCCESS",H="USER_GET_ERROR",z={status:null,id:null,display_name:null,country:null,error:null},Q=v(z,(c={},Object(O.a)(c,V,(function(e,t){return Object(f.a)(Object(f.a)({},e),{},{status:"OK"})})),Object(O.a)(c,K,(function(e,t){return Object(f.a)(Object(f.a)(Object(f.a)({},e),t.payload),{},{error:null,status:"OK"})})),Object(O.a)(c,H,(function(e,t){return Object(f.a)(Object(f.a)({},e),{},{error:t.payload,status:"ERROR"})})),Object(O.a)(c,g,(function(e,t){return z})),c)),J=a(29),X="PLAYLIST_MOVE_UP_SONG",W="PLAYLIST_MOVE_DOWN_SONG",q="PLAYLIST_DELETE_FROM_LIST",Z="PLAYLIST_GET",$="PLAYLIST_TRACK_GET",ee="PLAYLIST_ADD_TO_LIST",te="PLAYLIST_MOVE_UP_SONG_SUCCESS",ae="PLAYLIST_MOVE_UP_SONG_ERROR",ne="PLAYLIST_MOVE_DOWN_SONG_SUCCESS",re="PLAYLIST_MOVE_DOWN_SONG_ERROR",se="PLAYLIST_DELETE_FROM_LIST_SUCCESS",ce="PLAYLIST_DELETE_FROM_LIST_ERROR",ie="PLAYLIST_GET_SUCCESS",le="PLAYLIST_GET_ERROR",oe="PLAYLIST_TRACK_GET_SUCCESS",ue="PLAYLIST_TRACK_GET_ERROR",be="PLAYLIST_TRACK_GET_ALL_DONE",de="PLAYLIST_SELECT",je="PLAYLIST_FETCH_PROGRESS",pe="PLAYLIST_ADD_TO_LIST_SUCCESS",Oe="PLAYLIST_ADD_TO_LIST_ERROR",fe="PLAYLIST_ADD_TO_TRACKS",he="DELETE_FROM_TRACKS",me="TRACKS_SAVE_LOCATION",xe="TRACKS_DELETE_LOCATIONS",ye={status:null,error:null,selectedList:"",playlists:{},trackIndex:{},featureMaps:{},playlistsFetched:!1,tracksFetched:!1,fetchProgress:null},ge=v(ye,(i={},Object(O.a)(i,ie,(function(e,t){if(!t.payload.playlists||0===Object.keys(t.payload.playlists).length)return Object(f.a)(Object(f.a)({},e),{},{playlistsFetched:!0});var a={};return t.payload.playlists.forEach((function(e){a[e.id]={snapshot_id:e.snapshot_id,name:e.name,id:e.id,owner:e.owner.display_name||e.owner.id,description:e.description,image:e.images.length>=2&&e.images[1]||null,external_urls:e.external_urls,collaborative:e.collaborative,tracks:null}})),Object(f.a)(Object(f.a)({},e),{},{playlists:a,playlistsFetched:!0,selectedList:Object.values(a)[0].id,status:"Fetch Playlists Success"})})),Object(O.a)(i,le,(function(e,t){return Object(f.a)(Object(f.a)({},e),{},{error:t.payload,status:"ERROR"})})),Object(O.a)(i,oe,(function(e,t){var a=t.payload.playlist_id,n=t.payload.tracks.map((function(e){return e.id})),r=e.trackIndex,s=t.payload.tracks;s.forEach((function(e){r.hasOwnProperty(e.id)||(r[e.id]=e)}));var c=e.playlists[a];return s&&null===c.image&&(c.image=s.length>=1&&s[0].album_image?t.payload.tracks[0].album_image:null),Object(f.a)(Object(f.a)({},e),{},{playlists:Object(f.a)(Object(f.a)({},e.playlists),{},Object(O.a)({},a,Object(f.a)(Object(f.a)({},e.playlists[a]),{},{tracks:n}))),trackIndex:Object(f.a)({},r)})})),Object(O.a)(i,ue,(function(e,t){return Object(f.a)(Object(f.a)({},e),{},{error:t.payload,status:"ERROR"})})),Object(O.a)(i,be,(function(e,t){return Object(f.a)(Object(f.a)({},e),{},{tracksFetched:!0})})),Object(O.a)(i,te,(function(e,t){var a=t.payload.snapshot_id,n=t.payload.CI;if(0===n)return e;var r=e.playlists[e.selectedList],s=r.tracks,c=s[n-1];return s[n-1]=s[n],s[n]=c,Object(f.a)(Object(f.a)({},e),{},{playlists:Object(f.a)(Object(f.a)({},e.playlists),{},Object(O.a)({},e.selectedList,Object(f.a)(Object(f.a)({},r),{},{snapshot_id:a,tracks:Object(J.a)(s)})))})})),Object(O.a)(i,ae,(function(e,t){return Object(f.a)(Object(f.a)({},e),{},{error:t.payload,status:"ERROR"})})),Object(O.a)(i,ne,(function(e,t){var a=t.payload.snapshot_id,n=t.payload.CI,r=e.playlists[e.selectedList];if(n===r.tracks.length-1)return e;var s=r.tracks,c=s[n];return s[n]=s[n+1],s[n+1]=c,Object(f.a)(Object(f.a)({},e),{},{playlists:Object(f.a)(Object(f.a)({},e.playlists),{},Object(O.a)({},e.selectedList,Object(f.a)(Object(f.a)({},r),{},{snapshot_id:a,tracks:Object(J.a)(s)})))})})),Object(O.a)(i,re,(function(e,t){return Object(f.a)(Object(f.a)({},e),{},{error:t.payload,status:"ERROR"})})),Object(O.a)(i,se,(function(e,t){var a=t.payload.snapshot_id,n=t.payload.CI;console.log(e.selectedList);var r=e.playlists[e.selectedList],s=r.tracks,c=s.slice(0,n).concat(s.slice(n+1,s.length));return Object(f.a)(Object(f.a)({},e),{},{playlists:Object(f.a)(Object(f.a)({},e.playlists),{},Object(O.a)({},e.selectedList,Object(f.a)(Object(f.a)({},r),{},{snapshot_id:a,tracks:c})))})})),Object(O.a)(i,ce,(function(e,t){return Object(f.a)(Object(f.a)({},e),{},{error:t.payload,status:"ERROR"})})),Object(O.a)(i,de,(function(e,t){var a=t.playlistId;return Object(f.a)(Object(f.a)({},e),{},{selectedList:a})})),Object(O.a)(i,je,(function(e,t){return Object(f.a)(Object(f.a)({},e),{},{fetchProgress:t.currentPercentage})})),Object(O.a)(i,fe,(function(e,t){var a=t.trackId,n=t.track,r=e.trackIndex;if(!r.hasOwnProperty(a)&&n){var s={album_name:n.album.name,album_image:n.album.images.length>=2&&n.album.images[1]||null,artists:n.artists.map((function(e){return e.name})),is_local:n.is_local,external_urls:n.external_urls,name:n.name,id:n.id,preview_url:n.preview_url,uri:n.uri,duration:n.duration_ms};r[a]=s}return Object(f.a)(Object(f.a)({},e),{},{trackIndex:Object(f.a)({},r)})})),Object(O.a)(i,pe,(function(e,t){var a=t.payload.snapshot_id,n=t.payload.playlistId,r=t.payload.trackId,s=e.playlists[n],c=s.tracks,i=[].concat(Object(J.a)(c),[r]),l=t.payload.trackObj,o=e.trackIndex;if(l){var u={album_name:l.album.name,album_image:l.album.images.length>=2&&l.album.images[1]||null,artists:l.artists.map((function(e){return e.name})),is_local:l.is_local,external_urls:l.external_urls,name:l.name,id:l.id,preview_url:l.preview_url,uri:l.uri,duration:l.duration_ms};o[r]=u}return Object(f.a)(Object(f.a)({},e),{},{playlists:Object(f.a)(Object(f.a)({},e.playlists),{},Object(O.a)({},n,Object(f.a)(Object(f.a)({},s),{},{snapshot_id:a,tracks:i}))),trackIndex:Object(f.a)({},o)})})),Object(O.a)(i,Oe,(function(e,t){return Object(f.a)(Object(f.a)({},e),{},{error:t.payload,status:"ERROR"})})),Object(O.a)(i,g,(function(e,t){return Object(f.a)(Object(f.a)({},ye),{},{trackIndex:{}})})),i)),ke={status:null,stash:[],selectedTrack:"",trackLocations:{},previewPlayer:{}},ve=v(ke,(l={},Object(O.a)(l,xe,(function(e,t){var a=t.payload.playlistId,n=t.payload.trackId,r=e.trackLocations[n];return Object(f.a)(Object(f.a)({},e),{},{trackLocations:Object(f.a)(Object(f.a)({},e.trackLocations),{},Object(O.a)({},n,Object(f.a)(Object(f.a)({},r),{},Object(O.a)({},a,!1))))})})),Object(O.a)(l,fe,(function(e,t){var a=t.trackId,n=e.stash;return e.stash.includes(a)||(n=[].concat(Object(J.a)(e.stash),[a])),Object(f.a)(Object(f.a)({},e),{},{stash:n})})),Object(O.a)(l,he,(function(e,t){var a=t.CI,n=t.trackId,r=e.stash;if(n){if(!r.includes(n))return Object(f.a)({},e);r.reduce((function(e,t,r){t===n&&(a=r)}))}var s=r.slice(0,a).concat(r.slice(a+1,r.length));return Object(f.a)(Object(f.a)({},e),{},{stash:s})})),Object(O.a)(l,me,(function(e,t){var a=t.payload.playlist_id,n=t.payload.trackIds,r=e.trackLocations;return n.forEach((function(e){r.hasOwnProperty(e)||(r[e]={}),r[e][a]||(r[e][a]=!0)})),Object(f.a)(Object(f.a)({},e),{},{trackLocations:Object(f.a)({},r)})})),Object(O.a)(l,g,(function(e,t){return Object(f.a)(Object(f.a)({},ke),{},{trackLocations:{}})})),l)),_e=Object(p.c)({auth:S,fbase:w,search:G,user:Q,lists:ge,tracks:ve}),Se=a(1),Te=a.n(Se),Ie=a(10),Pe=Te.a.mark(Ne),Ee=Te.a.mark(Ae);function Ne(){return Te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,Object(Ie.i)(h);case 3:e.next=0;break;case 5:case"end":return e.stop()}}),Pe)}function Ae(){return Te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ie.b)([Object(Ie.k)(h,Ne)]);case 2:case"end":return e.stop()}}),Ee)}var we=Ae,Re=a(78),Le={apiKey:"AIzaSyD8zs9oK-BvtUICviOHLrVpcNOzbMvUR_k",authDomain:"listify-project-56d94.firebaseapp.com",databaseURL:"https://listify-project-56d94-default-rtdb.europe-west1.firebasedatabase.app",projectId:"listify-project-56d94",storageBucket:"listify-project-56d94.appspot.com",messagingSenderId:"108020178071",appId:"1:108020178071:web:b81127db0ed946e8abddd2"},Ce=a(38),Fe=a(50);function Ue(e){return Object(Ce.e)(e).then((function(e){return e})).catch((function(e){return e}))}function De(e){return Object(Ce.f)(e).then((function(e){return{response:e}})).catch((function(e){return{error:e}}))}var Ye=Te.a.mark(ze),Me=Te.a.mark(Qe),Ge=Te.a.mark(Je),Ve=Te.a.mark(Xe),Be=Te.a.mark(We),Ke=Te.a.mark(qe),He=Te.a.mark(Ze);function ze(){var e,t,a;return Te.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(Ie.c)(Re.a);case 2:if(e=n.sent,t=e.length>0?e[0]:null){n.next=8;break}return n.next=7,Object(Ie.c)(Re.b,Le);case 7:t=n.sent;case 8:return n.next=10,Object(Ie.c)(Ce.b);case 10:if(a=n.sent){n.next=15;break}return n.next=14,Object(Ie.c)(Ce.c,t,{persistence:Ce.a,popupRedirectResolver:void 0});case 14:a=n.sent;case 15:return n.next=17,Object(Ie.g)({type:T,payload:{app:t,auth:a}});case 17:case"end":return n.stop()}}),Ye)}function Qe(){var e,t;return Te.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(Ie.c)(Ce.b);case 2:return e=a.sent,t=function(t){t?sa.dispatch({type:I,uid:t.uid}):Ue(e).then((function(e){sa.dispatch({type:I,uid:e.user.uid})})).catch((function(e){return console.error(e)}))},a.next=6,Object(Ie.c)(Ce.d,e,t);case 6:(0,a.sent)();case 8:case"end":return a.stop()}}),Me)}function Je(){var e,t;return Te.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return e=Object(Ce.b)(),a.next=3,Object(Ie.g)({type:g});case 3:return a.next=5,Object(Ie.c)(De,e);case 5:if(t=a.sent,t.response,!t.error){a.next=13;break}return a.next=11,Object(Ie.g)({type:N});case 11:a.next=15;break;case 13:return a.next=15,Object(Ie.g)({type:E});case 15:case"end":return a.stop()}}),Ge)}function Xe(e){var t,a;return Te.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(Ie.h)($e);case 2:if(!(t=n.sent)){n.next=8;break}return n.next=6,Object(Ie.c)(Fe.a);case 6:a=n.sent,Object(Fe.d)(Object(Fe.c)(a,"/persistedState/"+t+"/"+e.endpoint),e.value);case 8:case"end":return n.stop()}}),Ve)}function We(e){return Te.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Ie.c)(Xe,{endpoint:"spotify",value:{token:e.token,expires_at:localStorage.getItem("spotifyExpiration")}});case 2:case"end":return t.stop()}}),Be)}function qe(){var e,t,a;return Te.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=3,Object(Ie.i)(I);case 3:return n.next=5,Object(Ie.h)($e);case 5:if(!(e=n.sent)){n.next=14;break}return n.next=9,Object(Ie.c)(Fe.a);case 9:return t=n.sent,n.next=12,Object(Ie.c)(Fe.c,t,"/persistedState/"+e+"/spotify");case 12:a=n.sent,Object(Fe.b)(a,(function(e){var t,a=e.val();if(null!==a&&"null"!==a){var n=new Date(Date.parse(a.expires_at));t=600,n.getTime()+1e3*t<Date.now()?sa.dispatch({type:g}):sa.dispatch({type:m,token:a.token,expires_in:n})}}));case 14:n.next=0;break;case 16:case"end":return n.stop()}}),Ke)}function Ze(){var e,t;return Te.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=3,Object(Ie.f)(qe);case 3:return e=a.sent,a.next=6,Object(Ie.c)(ze);case 6:return a.next=8,Object(Ie.c)(Qe);case 8:return a.next=10,Object(Ie.b)([Object(Ie.l)(m,We)]);case 10:return t=a.sent,a.next=13,Object(Ie.i)(P);case 13:return a.next=15,Object(Ie.d)(e);case 15:return a.next=17,Object(Ie.d)(t);case 17:return a.next=19,Object(Ie.c)(Je);case 19:a.next=0;break;case 21:case"end":return a.stop()}}),He)}var $e=function(e){return e.fbase.uid},et=Ze,tt="https://api.spotify.com/v1",at="POST",nt="PUT",rt="DELETE";function st(e){return e.json().then((function(t){if(!e.ok){var a=429===e.status?{retry_after:e.headers.get("retry-after")}:{},n=Object.assign(a,t,{status:e.status,statusText:e.statusText});return Promise.reject(n)}return t}))}var ct=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"application/json",s=t.startsWith("/")?t:"/"+t,c={Authorization:"Bearer "+e},i={method:a,headers:c};return 0!==Object.keys(n).length&&(i.body=JSON.stringify(n),c["Content-Type"]=r),fetch(tt+s,i).then(st).then((function(e){return{response:e}})).catch((function(e){return{error:e}}))},it=function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"&offset=0&limit=20",r="/search",s=a.reduce((function(e,t,a,n){return n.length-1!==a?e+t+",":e+t})),c="?q="+encodeURIComponent(t)+"&type="+encodeURIComponent(s)+"&market=from_token";return ct(e,r+c+n)},lt=Te.a.mark(dt),ot=Te.a.mark(jt),ut=Te.a.mark(pt),bt=Te.a.mark(Ot);function dt(e){var t,a,n,r,s;return Te.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(Ie.h)(ft);case 2:return t=c.sent,c.next=5,Object(Ie.c)(it,e.token,e.query,t);case 5:if(a=c.sent,n=a.response,!(r=a.error)){c.next=13;break}return c.next=11,Object(Ie.g)({type:C,payload:r.error});case 11:c.next=16;break;case 13:return s=n.tracks,c.next=16,Object(Ie.g)({type:F,payload:s});case 16:case"end":return c.stop()}}),lt)}function jt(e){var t,a,n,r,s,c;return Te.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Object(Ie.h)(ht);case 2:if(!(t=i.sent)){i.next=18;break}return a=t.slice(tt.length),i.next=7,Object(Ie.c)(ct,e.token,a);case 7:if(n=i.sent,r=n.response,!(s=n.error)){i.next=15;break}return i.next=13,Object(Ie.g)({type:C,payload:s.error});case 13:i.next=18;break;case 15:return c=r.tracks,i.next=18,Object(Ie.g)({type:F,payload:c});case 18:case"end":return i.stop()}}),ot)}function pt(e){var t,a,n,r,s,c;return Te.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Object(Ie.h)(mt);case 2:if(!(t=i.sent)){i.next=18;break}return a=t.slice(tt.length),i.next=7,Object(Ie.c)(ct,e.token,a);case 7:if(n=i.sent,r=n.response,!(s=n.error)){i.next=15;break}return i.next=13,Object(Ie.g)({type:C,payload:s.error});case 13:i.next=18;break;case 15:return c=r.tracks,i.next=18,Object(Ie.g)({type:F,payload:c});case 18:case"end":return i.stop()}}),ut)}function Ot(){var e;return Te.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(Ie.b)([Object(Ie.k)(L,dt),Object(Ie.k)(U,jt),Object(Ie.k)(D,pt)]);case 3:return e=t.sent,t.next=6,Object(Ie.i)(P);case 6:return t.next=8,Object(Ie.d)(e);case 8:t.next=0;break;case 10:case"end":return t.stop()}}),bt)}var ft=function(e){return e.search.resultTypes},ht=function(e){return e.search.activePage.next},mt=function(e){return e.search.activePage.previous},xt=Ot,yt=function(e){return ct(e,"/me")},gt=Te.a.mark(vt),kt=Te.a.mark(_t);function vt(e){var t,a,n,r,s;return Te.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(Ie.c)(yt,e.token);case 2:if(t=c.sent,a=t.response,!(n=t.error)){c.next=12;break}return c.next=8,Object(Ie.g)({type:P});case 8:return c.next=10,Object(Ie.g)({type:H,payload:n.error});case 10:c.next=16;break;case 12:return s={id:(r=a).id,display_name:r.display_name,country:r.country},c.next=16,Object(Ie.g)({type:K,payload:s});case 16:case"end":return c.stop()}}),gt)}function _t(){return Te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ie.b)([Object(Ie.k)(B,vt)]);case 2:case"end":return e.stop()}}),kt)}var St=_t,Tt=a(69),It=function(e,t){return ct(e,"/me/playlists?offset="+t+"&limit=50")},Pt=function(e,t,a){return ct(e,"/playlists/"+t+"/tracks?market=from_token&offset="+a+"&limit=100")},Et=function(e,t,a,n,r){return ct(e,"/playlists/"+t+"/tracks",nt,{range_start:a,insert_before:n,snapshot_id:r})},Nt=function(e,t,a,n){return ct(e,"/playlists/"+t+"/tracks",rt,{tracks:a,snapshot_id:n})},At=function(e,t,a){return ct(e,"/playlists/"+t+"/tracks",at,{uris:a})},wt=Te.a.mark(Vt),Rt=Te.a.mark(Bt),Lt=Te.a.mark(Kt),Ct=Te.a.mark(Ht),Ft=Te.a.mark(zt),Ut=Te.a.mark(Qt),Dt=Te.a.mark(Jt),Yt=Te.a.mark(Xt),Mt=function(e){return e.auth.spotify.token},Gt=function(e){return e.search.activePage};function Vt(e){var t,a,n,r,s,c,i,l;return Te.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Object(Ie.h)(Mt);case 2:return t=o.sent,a=e.playlistId,n=e.CI,r=e.CI-1,s=e.snapshot_id,o.next=9,Object(Ie.c)(Et,t,a,n,r,s);case 9:if(c=o.sent,i=c.response,l=c.error){o.next=17;break}return o.next=15,Object(Ie.g)({type:te,payload:{CI:e.CI,snapshot_id:i.snapshot_id}});case 15:o.next=19;break;case 17:return o.next=19,Object(Ie.g)({type:ae,payload:l.error});case 19:case"end":return o.stop()}}),wt)}function Bt(e){var t,a,n,r,s,c,i,l;return Te.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Object(Ie.h)(Mt);case 2:return t=o.sent,a=e.playlistId,n=e.CI+1,r=e.CI,s=e.snapshot_id,o.next=9,Object(Ie.c)(Et,t,a,n,r,s);case 9:if(c=o.sent,i=c.response,l=c.error){o.next=17;break}return o.next=15,Object(Ie.g)({type:ne,payload:{CI:e.CI,snapshot_id:i.snapshot_id}});case 15:o.next=19;break;case 17:return o.next=19,Object(Ie.g)({type:re,payload:l.error});case 19:case"end":return o.stop()}}),Rt)}function Kt(e){var t,a,n,r,s,c,i,l;return Te.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Object(Ie.h)(Mt);case 2:return t=o.sent,a=e.playlistId,n=e.snapshot_id,r=e.trackId,s=[{uri:e.track_uri,positions:[e.CI]}],o.next=9,Object(Ie.c)(Nt,t,a,s,n);case 9:if(c=o.sent,i=c.response,l=c.error){o.next=19;break}return o.next=15,Object(Ie.g)({type:xe,payload:{playlistId:a,trackId:r}});case 15:return o.next=17,Object(Ie.g)({type:se,payload:{CI:e.CI,snapshot_id:i.snapshot_id}});case 17:o.next=21;break;case 19:return o.next=21,Object(Ie.g)({type:ce,payload:l.error});case 21:case"end":return o.stop()}}),Lt)}function Ht(e){var t,a,n,r,s,c,i,l,o,u,b;return Te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ie.g)({type:je,currentPercentage:0});case 2:return e.next=4,Object(Ie.h)(Mt);case 4:return t=e.sent,a=0,e.next=8,Object(Ie.c)(It,t,a);case 8:if(s=e.sent,n=s.response,!(r=s.error)){e.next=17;break}if(401!==r.status){e.next=15;break}return e.next=15,Object(Ie.g)({type:P});case 15:e.next=57;break;case 17:c=n.total,i=c>50,l=n.items;case 20:if(!i||r){e.next=38;break}return a+=20,e.next=24,Object(Ie.c)(It,t,a);case 24:if(o=e.sent,n=o.response,r=o.error){e.next=31;break}l=l.concat(n.items),e.next=35;break;case 31:if(429!==r.status){e.next=35;break}return a-=50,e.next=35,Object(Ie.e)(1e3*r.retry_after);case 35:i=c>a+50,e.next=20;break;case 38:if(r){e.next=55;break}return e.next=41,Object(Ie.h)(Wt);case 41:if(u=e.sent,b=l.filter((function(e){return e.owner.id===u})),0!==c&&0!==b.length){e.next=51;break}return e.next=46,Object(Ie.g)({type:je,currentPercentage:100});case 46:return e.next=48,Object(Ie.g)({type:ie,payload:{}});case 48:return e.next=50,Object(Ie.g)({type:be});case 50:return e.abrupt("return");case 51:return e.next=53,Object(Ie.g)({type:ie,payload:{playlists:b}});case 53:e.next=57;break;case 55:return e.next=57,Object(Ie.g)({type:le,payload:r.error});case 57:case"end":return e.stop()}}),Ct)}function zt(e){var t,a,n,r,s,c,i,l,o,u,b,d;return Te.a.wrap((function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,Object(Ie.h)(Mt);case 2:return t=j.sent,a=e.playlistId,n=0,j.next=7,Object(Ie.c)(Pt,t,a,n);case 7:if(c=j.sent,r=c.response,!(s=c.error)){j.next=13;break}j.next=47;break;case 13:i=r.total,l=i>100,o=r.items;case 16:if(!l||s){j.next=36;break}return n+=100,j.next=20,Object(Ie.c)(Pt,t,a,n);case 20:if(u=j.sent,r=u.response,s=u.error){j.next=27;break}o=o.concat(r.items),j.next=33;break;case 27:if(429!==s.status){j.next=33;break}return n-=100,j.next=31,Object(Ie.e)(1e3*s.retry_after);case 31:j.next=33;break;case 33:l=i>n+100,j.next=16;break;case 36:if(s){j.next=45;break}return b=o.filter((function(e){return!e.is_local})).map((function(e){var t=e.track;return{album_name:t.album?t.album.name:"No Album",album_image:t.album&&t.album.images.length>=2&&t.album.images[1]||null,artists:t.artists.map((function(e){return e.name})),is_local:t.is_local,external_urls:t.external_urls,name:t.name,id:t.id,preview_url:t.preview_url,uri:t.uri,duration:t.duration_ms}})),d=r.items.map((function(e){return e.track.id})),j.next=41,Object(Ie.g)({type:oe,payload:{playlist_id:a,tracks:b}});case 41:return j.next=43,Object(Ie.g)({type:me,payload:{playlist_id:a,trackIds:d}});case 43:j.next=47;break;case 45:return j.next=47,Object(Ie.g)({type:ue,payload:s.error});case 47:case"end":return j.stop()}}),Ft)}function Qt(){var e,t,a,n,r;return Te.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return e=Tt.a.expanding(10),s.next=3,Object(Ie.a)($,e);case 3:t=s.sent,a=0;case 5:if(!(a<=0)&&e.isEmpty()){s.next=19;break}return s.next=8,Object(Ie.i)(t);case 8:return n=s.sent,s.next=11,Object(Ie.c)(zt,n);case 11:return a++,s.next=14,Object(Ie.h)(qt);case 14:return r=s.sent,s.next=17,Object(Ie.g)({type:je,currentPercentage:Math.round(a/r*100)});case 17:s.next=5;break;case 19:return s.next=21,Object(Ie.g)({type:be});case 21:case"end":return s.stop()}}),Ut)}function Jt(e){var t,a,n,r,s,c,i,l,o;return Te.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,Object(Ie.h)(Mt);case 2:return t=u.sent,u.next=5,Object(Ie.h)(Gt);case 5:return a=u.sent,n=e.playlistId,r=e.trackId,s=["spotify:track:"+r],u.next=11,Object(Ie.c)(At,t,n,s);case 11:if(c=u.sent,i=c.response,l=c.error){u.next=22;break}return o=a?a.items.filter((function(e){return e.id===r}))[0]:null,u.next=18,Object(Ie.g)({type:me,payload:{playlist_id:n,trackIds:[r]}});case 18:return u.next=20,Object(Ie.g)({type:pe,payload:{playlistId:n,snapshot_id:i.snapshot_id,trackId:r,trackObj:o}});case 20:u.next=24;break;case 22:return u.next=24,Object(Ie.g)({type:Oe,payload:l.error});case 24:case"end":return u.stop()}}),Dt)}function Xt(){var e;return Te.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(Ie.b)([Object(Ie.j)(X,Vt),Object(Ie.j)(W,Bt),Object(Ie.l)(q,Kt),Object(Ie.l)(Z,Ht),Object(Ie.l)(ee,Jt),Object(Ie.f)(Qt)]);case 3:return e=t.sent,t.next=6,Object(Ie.i)(P);case 6:return t.next=8,Object(Ie.d)(e);case 8:t.next=0;break;case 10:case"end":return t.stop()}}),Yt)}var Wt=function(e){return e.user.id},qt=function(e){return Object.keys(e.lists.playlists).length},Zt=Xt,$t=Te.a.mark(ea);function ea(e){return Te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ie.b)([]);case 2:case"end":return e.stop()}}),$t)}var ta=ea,aa=Te.a.mark(na);function na(){return Te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ie.f)(we);case 2:return e.next=4,Object(Ie.f)(et);case 4:return e.next=6,Object(Ie.f)(xt);case 6:return e.next=8,Object(Ie.f)(St);case 8:return e.next=10,Object(Ie.f)(Zt);case 10:return e.next=12,Object(Ie.f)(ta);case 12:case"end":return e.stop()}}),aa)}window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__();var ra=Object(Tt.b)(),sa=Object(p.e)(_e,Object(p.a)(ra));ra.run(na);var ca=a(76),ia=(a(100),a(101),a(20)),la=(a(102),a(119)),oa=a(120),ua=a(40),ba=a.p+"static/media/LOGO.846060d1.svg",da=a(81),ja=a(28),pa={initSearch:function(){return k(R)},getSearchResults:function(e,t){return k(L,{token:e,query:t})},getNextPage:function(e){return k(U,{token:e})},getPreviousPage:function(e){return k(D,{token:e})},setIsTabVisible:function(e){return k(Y,{visible:e})}},Oa=(a(103),a(57)),fa=a.p+"static/media/BGimg.7e2b74e4.png",ha=a.p+"static/media/Search.8d2bd43b.svg",ma=a(4);var xa=function(e){return Object(ma.jsxs)("div",{className:"searchview",children:[Object(ma.jsx)("img",{alt:"background",src:fa})," ",Object(ma.jsxs)("div",{className:"searchcontainer",children:[Object(ma.jsx)("h6",{children:"Listify helps you manage and find inspiration for your playlists"}),Object(ma.jsxs)("div",{className:"s-searchbar",children:[Object(ma.jsx)("form",{className:"s-searchinput",children:Object(ma.jsx)(Oa.a.Group,{controlId:"formSearchInput",children:Object(ma.jsx)(Oa.a.Control,{autoFocus:e.tabVisible,type:"text",placeholder:"Search for songs based on its title, artist, or album..",onChange:function(t){return e.onSearch(t.target.value)},ref:e.getSearchBarRef()})})}),Object(ma.jsx)("img",{alt:"",src:ha})," "]})]})]})},ya=(a(106),a(53)),ga=a(44),ka=a(56),va=a.p+"static/media/Spotify_Icon.cd66b8f6.png",_a=a.p+"static/media/Inboxes fill.043f2be9.svg",Sa="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAZCAYAAAArK+5dAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHRSURBVHgB7ZRfTttAEMa/WTt/3QcfITdoOAFwgqZSW0d9IicoPQHpCdobNH0jSiXCCZobkJ4A9wQ1EoRgszPMGiEBckwS8oT4SbGS3fm+yc54h7CA7EN9B8bsYBmYJ5Xf80nRFhUtStT4wjA/sBL81RtePq1JPwdtGwXCUfMIS+JinSb9GLQf75n7P6Rbb3lWnHFMV9UeluQ2VmLP4OhSPRYnYE/NKUzJ7tI4SbAkLtYQ7+rXsJZ7FCSQKPguhLaI6TUO5zFWhFTjtLmHej3YdE11Ncy6b/p4Js7DedmosZ8ndk31LE4IMjbD2XtsANd0AXUsY4ts1DzVPK0ygUCO/eGs82BNy8DAPsqJffckwdSqSVGEB3oHou3H6wzpkFCpTvvR8iGUMMm/ynDWLwrUmk6MyB/51DyYG/5Vn9cT1LID/fctFvQqo9mgSMdRsC3A1Ojx/xLoLRZQOTyfMNE3/fSr4p1yLfvvSuPW/NHFYJFOBKE+z3whSnRehChBk/T1Eg6u2ewJSULkTV3iMg3yVx7HdN0N9rQHPy2nW9VRNsUGcBOB9bRW5xNJJwy5lp489SatQZxPhLuM7vjYEK6MlmS8zkRYmdeL9nrR1uNlXbQbkzZdLHjynWgAAAAASUVORK5CYII=";var Ta=function(e){return Object(ma.jsx)("div",{className:"searchresultview",children:Object(ma.jsxs)("div",{className:"searchresultcontainer",children:[Object(ma.jsxs)("div",{className:"sr-searchbar",children:[Object(ma.jsx)("form",{className:"sr-searchinput",children:Object(ma.jsx)(Oa.a.Group,{controlId:"formSearchInput",children:Object(ma.jsx)(Oa.a.Control,{autoFocus:!0,defaultValue:e.search,type:"text",placeholder:"Search for songs based on its title, artist, or album..",onChange:function(t){return e.onSearch(t.target.value)},ref:e.getSearchBarRef()})})}),Object(ma.jsx)("img",{alt:"search icon",src:ha})]}),Object(ma.jsx)(ya.a,{size:"sm",children:Object(ma.jsx)("thead",{children:Object(ma.jsxs)("tr",{children:[Object(ma.jsx)("th",{class:"th-index",children:" "}),Object(ma.jsx)("th",{class:"th-songname text-muted",children:"Name "}),Object(ma.jsx)("th",{class:"th-songartist text-muted",children:"Artist"}),Object(ma.jsx)("th",{class:"th-songalbum text-muted",children:"Album"}),Object(ma.jsx)("th",{class:"th-actions text-muted",children:"Actions"})]})})}),Object(ma.jsxs)("div",{className:"resultscontainer",children:[e.results.map((function(t,a){return Object(ma.jsxs)("div",{className:"songitem",children:[Object(ma.jsx)("div",{className:"cd-cover",children:Object(ma.jsx)("img",{alt:"song album cover",className:"songitem-cover",src:t.image})}),Object(ma.jsx)(ka.a,{children:Object(ma.jsxs)("div",{className:"cardcontent",children:[Object(ma.jsx)("p",{className:"cd-name text-muted",children:Object(ma.jsx)("a",{href:t.spotifyUrl,children:t.track})}),Object(ma.jsxs)("p",{className:"cd-artist text-muted",children:[Object(ma.jsx)("i",{class:"fas fa-user"}),t.artist]}),Object(ma.jsxs)("p",{className:"cd-album text-muted",children:[Object(ma.jsx)("i",{class:"fas fa-record-vinyl"}),t.album]}),Object(ma.jsxs)("div",{className:"cd-Actions",children:[Object(ma.jsx)("div",{className:"sr-addsong",children:Object(ma.jsxs)("div",{className:e.isFetchingPlaylists?"dropdown disabled":"dropdown",children:[Object(ma.jsx)("button",{className:"dropbtn",disabled:e.isFetchingPlaylists,children:Object(ma.jsx)("i",{className:"far fa-plus-square"})}),Object(ma.jsx)("div",{className:"dropdown-content",onClick:e.notify,children:e.playlists.map((function(a){return Object(ma.jsx)("p",{onClick:function(){return e.onAddToPlaylist(a.id,t.id)},className:"playlist-dropdown-p",children:a.name})}))})]})}),Object(ma.jsx)(ga.a,{variant:"light",onClick:t.isInStash?function(){return e.onDeleteFromTracks(a)}:function(){return e.onAddToTracks(a)},children:Object(ma.jsx)("img",{alt:"remove from track stash",src:t.isInStash?_a:Sa})}),Object(ma.jsx)("a",{target:"_blank",rel:"noreferrer",href:t.spotifyUrl,children:Object(ma.jsx)("img",{alt:"open song in Spotify",src:va,className:"openinspotify"})})]})]})})]},a)})),Object(ma.jsx)("div",{className:"Pagenav",children:Object(ma.jsxs)("nav",{children:[Object(ma.jsxs)("ul",{class:"pagination",children:[Object(ma.jsx)("li",{class:1===e.currentPage?"page-item disabled":"page-item",children:Object(ma.jsxs)("span",{class:"page-link","aria-label":"Previous",onClick:e.onPrevPage,disabled:1===e.currentPage,children:[Object(ma.jsx)("span",{"aria-hidden":"true"}),Object(ma.jsx)("span",{class:"sr-only",children:"Previous"}),"Previous"]})}),Object(ma.jsx)("li",{class:e.currentPage===e.numPages?"page-item disabled":"page-item",children:Object(ma.jsxs)("span",{class:"page-link","aria-label":"Next",onClick:e.onNextPage,disabled:e.currentPage===e.numPages,children:[Object(ma.jsx)("span",{"aria-hidden":"true"}),Object(ma.jsx)("span",{class:"sr-only",children:"Next"}),"Next"]})})]}),Object(ma.jsxs)("p",{children:["Page ",e.currentPage," out of ",e.numPages]})]})})]})]})})},Ia={deleteFromList:function(e){return k(xe,{playlistId:e})},addToTracks:function(e,t){return k(fe,{trackId:e,track:t})},deleteFromTracks:function(e,t){return k(he,{CI:e,trackId:t})}},Pa={moveUpSong:function(e,t,a,n){return k(X,{token:e,playlistId:t,CI:a,snapshot_id:n})},moveDownSong:function(e,t,a,n){return k(W,{token:e,playlistId:t,CI:a,snapshot_id:n})},deleteFromList:function(e,t,a,n,r,s){return k(q,{token:e,playlistId:t,track_uri:a,snapshot_id:n,CI:r,trackId:s})},fetchPlaylists:function(e){return k(Z,{token:e})},fetchTrack:function(e,t){return k($,{token:e,playlistId:t})},selectPlaylist:function(e){return k(de,{playlistId:e})},addToPlaylist:function(e,t,a){return k(ee,{token:e,playlistId:t,trackId:a})}},Ea=a(47);a(83);Ea.a.configure();var Na={getSearchResults:pa.getSearchResults,getNextPage:pa.getNextPage,getPreviousPage:pa.getPreviousPage,addToTracks:Ia.addToTracks,deleteFromTracks:Ia.deleteFromTracks,addToPlaylist:Pa.addToPlaylist},Aa=Object(j.b)((function(e){var t=e.search.activePage&&e.search.activePage.total||0,a=[],n=[];return e.search.activePage&&(a=e.search.activePage.items.map((function(t){var a=t.artists.reduce((function(e,t,a,n){return n.length-1!==a?e+t.name+", ":e+t.name}),""),n=t.album.images.reduce((function(e,t){return t.height<e.height?t:e}),t.album.images[0]),r=Math.floor(t.duration_ms/1e3/60),s=Math.round((t.duration_ms-1e3*r*60)/1e3),c=e.tracks.stash.includes(t.id);return{artist:a,album:t.album.name,track:t.name,spotifyUrl:t.external_urls.spotify,image:n.url,duration:r+":"+s,previewSong:t.preview_url,id:t.id,isInStash:c}})),n=Object.values(e.lists.playlists).map((function(e){return{name:e.name,id:e.id}}))),{totalResults:t,results:a,token:e.auth.spotify.token,rawItems:e.search.activePage&&e.search.activePage.items||null,isTabVisible:e.search.isTabVisible,playlists:n,isFetchingPlaylists:!e.lists.playlistsFetched||!e.lists.tracksFetched}}),Na)((function(e){var t=Object(o.useState)(""),a=Object(ja.a)(t,2),n=a[0],r=a[1],s=e.token,c=e.isTabVisible,i=Object(o.useRef)(null);Object(o.useEffect)((function(){n&&e.getSearchResults(s,n)}),[n]),Object(o.useEffect)((function(){c&&i&&i.current&&i.current.focus()}),[c,i]);var l=Object(o.useState)(1),u=Object(ja.a)(l,2),b=u[0],d=u[1],j=Math.ceil(e.totalResults/20);return n?Object(ma.jsx)(Ta,{onSearch:function(e){return r(e)},search:n,results:e.results,currentPage:b,numPages:j,onNextPage:function(){!function(e,t,a){e!==t&&a(e+1)}(b,j,d),e.getNextPage(s)},onPrevPage:function(){!function(e,t){0!==e&&t(e-1)}(b,d),e.getPreviousPage(s)},tabVisible:c,getSearchBarRef:function(){return i},onAddToTracks:function(t){return e.addToTracks(e.results[t].id,e.rawItems[t])},onDeleteFromTracks:function(t){return e.deleteFromTracks(t,e.results[t].id)},playlists:e.playlists,onAddToPlaylist:function(t,a){return e.addToPlaylist(s,t,a)},notify:function(){s&&e.results&&e.playlists?Ea.a.success("Add to playlist successfully!"):Ea.a.error("Ops, something wrong!")},isFetchingPlaylists:e.isFetchingPlaylists}):Object(ma.jsx)(xa,{onSearch:function(e){return r(e)},tabVisible:c,getSearchBarRef:function(){return i}})})),wa=(a(107),a(118));var Ra=function(e){return Object(ma.jsxs)("div",{className:"playlistview",children:[Object(ma.jsx)("div",{className:"playlistsnav",children:e.allPlaylists&&e.allPlaylists.map((function(t,a){return Object(ma.jsxs)("div",{className:e.selectedPlaylist&&e.selectedPlaylist===t.id||!e.selectedPlaylist&&0===a?"selectedplaylist":"unselectedplaylist",onClick:function(){return e.onSelectPlaylist(t.id)},children:[Object(ma.jsx)("img",{className:t.image?"":"no-img",alt:"playlists",src:t.image?t.image.url:ba}),Object(ma.jsx)("p",{className:"h6 text-light",children:t.name})]},a)}))||Object(ma.jsx)("p",{className:"no-playlists-text",children:"Your account has no playlists yet."})}),Object(ma.jsxs)("div",{className:"playlistcontent",children:[Object(ma.jsxs)("div",{className:"playlistbanner",children:[Object(ma.jsx)("img",{alt:"selected playlist",className:e.playlist&&e.playlist.image?"":"no-img",src:e.playlist&&e.playlist.image?e.playlist.image.url:ba}),Object(ma.jsxs)("div",{className:"playlistinfo",children:[Object(ma.jsx)("div",{className:" h4 text-light",children:e.playlist&&e.playlist.name||""}),Object(ma.jsx)("p",{className:" md text-light",children:e.playlist&&e.playlist.description||""}),Object(ma.jsx)("form",{className:"actionsbar",children:Object(ma.jsx)("div",{className:"form-group",children:Object(ma.jsx)("input",{type:"text",class:"form-control",id:"PlaylistSearchAction",placeholder:"Filter songs..",defaultValue:e.searchTerm,onChange:function(t){return e.onSearchTerm(t.target.value)}})})})]})]}),Object(ma.jsx)(ya.a,{className:"p-tabletitle",size:"sm",children:Object(ma.jsx)("thead",{children:Object(ma.jsxs)("tr",{children:[Object(ma.jsx)("th",{children:"#"}),Object(ma.jsx)("th",{children:"Actions"})]})})}),Object(ma.jsx)("div",{className:"songscontainer",children:e.tracks.map((function(t,a,n){return Object(ma.jsxs)("div",{className:"p-songitem",children:[Object(ma.jsx)("h6",{children:a+1}),Object(ma.jsx)("img",{className:"p-songcover",alt:"song album cover",src:t.image?t.image.url:ba,width:"48px",height:"48px"}),Object(ma.jsx)(ka.a,{borderless:"1",children:Object(ma.jsxs)("div",{className:"p-cardbody",children:[Object(ma.jsxs)("div",{className:"p-cardcontent",children:[Object(ma.jsx)("div",{className:"p-songname",children:t.name}),Object(ma.jsxs)("div",{className:"p-songartist",children:[Object(ma.jsx)("i",{className:"fas fa-user"}),t.artist]}),Object(ma.jsxs)("div",{className:"p-songalbum",children:[Object(ma.jsx)("i",{className:"fas fa-record-vinyl"}),t.album_name]})]}),Object(ma.jsxs)("div",{className:"p-actions",children:[Object(ma.jsx)("div",{onClick:t.isInStash?function(){return e.onDeleteFromTracks(a)}:function(){return e.onAddToTracks(a)},children:t.isInStash?Object(ma.jsx)("button",{className:"trackmarked",children:Object(ma.jsx)("img",{alt:"add to track stash",src:_a})}):Object(ma.jsx)("button",{className:"nottrackmarked",children:Object(ma.jsx)("img",{alt:"remove from track stash",src:Sa})})}),Object(ma.jsx)("a",{target:"_blank",rel:"noreferrer",href:t.spotifyUrl,children:Object(ma.jsx)("img",{alt:"open song in Spotify",src:va,className:"openinspotify"})}),Object(ma.jsxs)(wa.a,{children:[Object(ma.jsx)("button",{disabled:!e.actionsDisabled||0===a,onClick:function(){return e.onMoveUpSong(a)},children:Object(ma.jsx)("i",{className:"far fa-arrow-alt-circle-up"})}),Object(ma.jsx)("button",{disabled:!e.actionsDisabled||a===n.length-1,onClick:function(){return e.onMoveDownSong(a)},children:Object(ma.jsx)("i",{className:"far fa-arrow-alt-circle-down"})}),Object(ma.jsx)("button",{disabled:!e.actionsDisabled,onClick:function(){return e.onDeleteSong(a)},children:Object(ma.jsx)("i",{className:"far fa-minus-square"})})]})]})]})})]},a)}))})]})]})};a(108);var La=function(e){var t=e.size,a=e.percentage,n="xs"===t?"loading-view-xs":"sm"===t?"loading-view-sm":"md"===t?"loading-view-md":"loading-view-lg";return Object(ma.jsx)("div",{className:"loading-view "+n,children:Object(ma.jsxs)("div",{className:"lds-ring",children:[Object(ma.jsx)("div",{}),Object(ma.jsx)("div",{}),Object(ma.jsx)("div",{}),null!==a&&"undefined"!==typeof a&&Object(ma.jsx)("p",{className:"loading-percentage",children:a+"%"})]})})},Ca=a(88);var Fa={fetchPlaylists:Pa.fetchPlaylists,fetchTracks:Pa.fetchTrack,selectPlaylist:Pa.selectPlaylist,moveUpSong:Pa.moveUpSong,moveDownSong:Pa.moveDownSong,deleteFromList:Pa.deleteFromList,addToTracks:Ia.addToTracks,deleteFromTracks:Ia.deleteFromTracks},Ua=Object(j.b)((function(e){var t=null,a=null,n=null;return e.lists.playlistsFetched&&Object.keys(e.lists.playlists).length>0&&((t=e.lists.selectedList?e.lists.playlists[e.lists.selectedList]:Object.values(e.lists.playlists)[0]).tracks&&(n=t.tracks.map((function(t){var a=e.lists.trackIndex[t],n=a.artists.reduce((function(e,t,a,n){return n.length-1!==a?e+t+", ":e+t}),""),r=Math.floor(a.duration/1e3/60),s=Math.round((a.duration-1e3*r*60)/1e3),c=e.tracks.stash.includes(a.id);return{name:a.name,album_name:a.album_name,artist:n,spotifyUrl:a.external_urls.spotify,duration:r+":"+s,previewSong:a.preview_url,image:a.album_image,isInStash:c,uri:a.uri,id:a.id}}))),a=Object.values(e.lists.playlists).map((function(e){return{name:e.name,image:e.image,id:e.id}}))),{token:e.auth.spotify.token,selectedPlaylist:e.lists.selectedList,playlists:e.lists.playlists,playlist:t,playlistsFetched:e.lists.playlistsFetched,tracksFetched:e.lists.tracksFetched,playlistTracks:n,allPlaylists:a,fetchProgress:e.lists.fetchProgress}}),Fa)((function(e){var t=e.token,a=e.playlists,n=e.playlistsFetched,r=e.tracksFetched,s=e.playlist,c=e.playlistTracks,i=e.allPlaylists,l=e.selectedPlaylist;Object(o.useEffect)((function(){t&&e.fetchPlaylists(t)}),[]),Object(o.useEffect)((function(){n&&0!==Object.keys(a).length&&!r&&Object.values(a).forEach((function(a){a.tracks||e.fetchTracks(t,a.id)}))}),[n]);var u=Object(o.useState)(""),b=Object(ja.a)(u,2),d=b[0],j=b[1],p=Object(o.useState)(c),O=Object(ja.a)(p,2),f=O[0],h=O[1],m=c||[];return Object(o.useEffect)((function(){if(d){var e=new Ca.a(m,["name","artist","album_name"],{caseSensitive:!1});h(e.search(d))}else m&&h(m)}),[d,c]),s&&a&&f&&i&&c&&r||n&&r&&0===Object.keys(a).length?Object(ma.jsx)(Ra,{onSelectPlaylist:function(t){return e.selectPlaylist(t)},onMoveUpSong:function(a){return e.moveUpSong(t,s.id,a,s.snapshot_id)},onMoveDownSong:function(a){return e.moveDownSong(t,s.id,a,s.snapshot_id)},onDeleteSong:function(a){return e.deleteFromList(t,s.id,c[a].uri,s.snapshot_id,a,s.tracks[a])},tracks:f,allPlaylists:i,playlist:s,selectedPlaylist:l,onAddToTracks:function(t){return e.addToTracks(s.tracks[t],c[t])},onDeleteFromTracks:function(t){return e.deleteFromTracks(t,s.tracks[t])},onSearchTerm:function(e){return j(e)},searchTerm:d,actionsDisabled:0==d}):Object(ma.jsx)(La,{percentage:e.fetchProgress})}));a(109);var Da=function(e){return Object(ma.jsxs)("div",{className:"tracksview",children:[Object(ma.jsxs)("div",{className:"pagetitle",children:[Object(ma.jsx)("p",{className:"h5",children:"Tracks"}),Object(ma.jsx)("img",{alt:"tracks page logo",src:_a})]}),Object(ma.jsxs)("div",{className:"trackstable",children:[Object(ma.jsx)(ya.a,{className:"t-tabletitle",size:"sm",children:Object(ma.jsx)("thead",{children:Object(ma.jsxs)("tr",{children:[Object(ma.jsx)("th",{className:"text-light",children:" "}),Object(ma.jsx)("th",{className:"text-light",children:"Actions"})]})})}),Object(ma.jsx)("div",{className:"trackscontainer",children:(null===e.tracks||0===e.tracks.length)&&Object(ma.jsx)("span",{className:" new-playlist text-light",children:"Add tracks from your Playlist or search for new songs to add!"})||e.tracks.map((function(t,a){return Object(ma.jsxs)("div",{className:"t-songitem",children:[Object(ma.jsx)("img",{className:"t-songcover",alt:"song album cover",src:t.image.url}),Object(ma.jsx)(ka.a,{borderless:"1",children:Object(ma.jsxs)("div",{className:"cardbody",children:[Object(ma.jsxs)("div",{className:"cardcontent",children:[Object(ma.jsx)("div",{className:"song-name",children:t.name}),Object(ma.jsxs)("div",{className:"song-artist",children:[Object(ma.jsx)("i",{className:"fas fa-user"}),t.artist]}),Object(ma.jsxs)("div",{className:"song-album",children:[Object(ma.jsx)("i",{className:"fas fa-record-vinyl"}),t.album_name]})]}),Object(ma.jsxs)("div",{className:"t-actions",children:[Object(ma.jsx)("div",{className:"sr-addsong",children:Object(ma.jsxs)("div",{className:e.isFetchingPlaylists?"dropdown disabled":"dropdown",children:[Object(ma.jsx)("button",{className:"dropbtn",disabled:e.isFetchingPlaylists,children:Object(ma.jsx)("i",{className:"far fa-plus-square"})}),Object(ma.jsx)("div",{className:"dropdown-content",onClick:e.notify,children:e.playlists.map((function(a){return Object(ma.jsx)("p",{onClick:function(){return e.onAddToPlaylist(a.id,t.id)},className:"playlist-dropdown-p",children:a.name})}))})]})}),Object(ma.jsx)(ga.a,{variant:"light",className:"btn-sm",onClick:function(){return e.onDeleteTrack(a)},children:Object(ma.jsx)("img",{alt:"remove from track stash",src:_a,width:"16px",height:"16px"})}),Object(ma.jsx)("a",{href:t.spotifyUrl,children:Object(ma.jsx)("img",{alt:"open song in Spotify",src:va,className:"openinspotify"})})]})]})})]})}))})]})]})};var Ya={deleteFromTracks:Ia.deleteFromTracks,addToPlaylist:Pa.addToPlaylist},Ma=Object(j.b)((function(e){var t=e.tracks.stash,a=null,n=[];return t&&(a=t.map((function(t){var a=e.lists.trackIndex[t],n=a.artists.reduce((function(e,t,a,n){return n.length-1!==a?e+t+", ":e+t}),""),r=Math.floor(a.duration/1e3/60),s=Math.round((a.duration-1e3*r*60)/1e3);return{name:a.name,album_name:a.album_name,artist:n,spotifyUrl:a.external_urls.spotify,duration:r+":"+s,previewSong:a.preview_url,image:a.album_image,uri:a.uri,id:a.id}})),n=Object.values(e.lists.playlists).map((function(e){return{name:e.name,id:e.id}}))),{results:a,token:e.auth.spotify.token,playlists:n,isFetchingPlaylists:!e.lists.playlistsFetched||!e.lists.tracksFetched}}),Ya)((function(e){var t=e.token;return Object(o.useEffect)((function(){Ea.a.configure()}),[]),Object(ma.jsx)(Da,{tracks:e.results,onDeleteTrack:function(t){return e.deleteFromTracks(t)},playlists:e.playlists,onAddToPlaylist:function(a,n){return e.addToPlaylist(t,a,n)},notify:function(){t&&e.results&&e.playlists?Ea.a.success("Add to playlist successfully!"):Ea.a.error("Ops, something wrong!")},isFetchingPlaylists:e.isFetchingPlaylists})}));var Ga=function(e){return Object(ma.jsx)("div",{className:"authorized-view",children:Object(ma.jsxs)(la.a.Container,{id:"left-tabs-example",defaultActiveKey:"playlist",children:[Object(ma.jsxs)(ua.a,{id:"navbar",className:"navbar",children:[Object(ma.jsxs)(ua.a,{variant:"tabs",className:"mr-auto",id:"nav-container",children:[Object(ma.jsx)(ua.a.Item,{children:Object(ma.jsx)(ua.a.Link,{eventKey:"playlist",onClick:e.onTabClick,children:"Playlist"})}),Object(ma.jsx)(ua.a.Item,{children:Object(ma.jsx)(ua.a.Link,{eventKey:"search",onClick:e.onSearchTabClick,children:"Search"})}),Object(ma.jsx)(ua.a.Item,{children:Object(ma.jsx)(ua.a.Link,{eventKey:"tracks",onClick:e.onTabClick,children:"Tracks"})})]}),Object(ma.jsxs)(ua.a,{children:[Object(ma.jsx)(da.a,{title:e.username,children:Object(ma.jsx)(da.a.Item,{onClick:e.logout,eventKey:"1",children:"Sign Out"})}),Object(ma.jsx)(oa.a.Brand,{children:Object(ma.jsx)("img",{id:"listify-logo",src:ba,alt:"Logo",height:"30",width:"30"})})]})]}),Object(ma.jsxs)(la.a.Content,{children:[Object(ma.jsx)(la.a.Pane,{eventKey:"search",children:Object(ma.jsx)(Aa,{})}),Object(ma.jsx)(la.a.Pane,{eventKey:"playlist",children:Object(ma.jsx)(Ua,{})}),Object(ma.jsx)(la.a.Pane,{eventKey:"tracks",children:Object(ma.jsx)(Ma,{})})]})]})})};var Va={fetchSpotifyUser:{initUser:function(){return k(V)},fetchUser:function(e){return k(B,{token:e})}}.fetchUser,logout:{initFbase:function(){return k("FBASE_INIT")},authFbase:function(){return k("FBASE_AUTHENTICATE")},setUid:function(e){return k(I,{uid:e})},logout:function(){return k(P)}}.logout,setSearchTabVisibility:pa.setIsTabVisible},Ba=Object(j.b)((function(e){return{token:e.auth.spotify.token,user:e.user}}),Va)((function(e){var t=e.token,a=e.user,n=Object(ia.g)();return t||n.push("/login"),Object(o.useEffect)((function(){t&&!a.id&&e.fetchSpotifyUser(t)}),[t]),a.id?Object(ma.jsx)(Ga,{username:a.display_name||a.id||"",logout:function(){return e.logout()},onTabClick:function(){return e.setSearchTabVisibility(!1)},onSearchTabClick:function(){return e.setSearchTabVisibility(!0)}}):Object(ma.jsx)(La,{size:"lg"})})),Ka={initAuth:function(){return k(h)},saveSpotifyToken:function(e,t,a){return k(m,{token:e,expires_in:t,spotify_string:a})},saveSpotifyTokenError:function(e){return k(x,{error:e})},setSpotifyState:function(e){return k(y,{spotify_string:e})}};var Ha={saveSpotifyToken:Ka.saveSpotifyToken,saveSpotifyTokenError:Ka.saveSpotifyTokenError},za=Object(j.b)((function(e){return{auth:e.auth}}),Ha)((function(e){var t=Object(ia.g)(),a=Object(ia.h)();return a.state&&a.state===localStorage.getItem("spotifyState")||t.push("/login"),a.error&&(e.saveSpotifyTokenError(a.error),t.push("/login")),a.token&&a.expires_in&&(e.saveSpotifyToken(a.token,a.expires_in),localStorage.removeItem("spotifyState")),Object(ma.jsx)(La,{size:"lg"})}));var Qa=encodeURIComponent(["ugc-image-upload","playlist-modify-public","playlist-modify-private","playlist-read-private","playlist-read-collaborative","user-read-private"].reduce((function(e,t,a){return 0!==a?e+" "+t:t}))),Ja="https://accounts.spotify.com/authorize?client_id=".concat("c0e19491232e4cadbff0efd339179f6d","&redirect_uri=").concat(encodeURIComponent("https://martinfalke.github.io/spotify-project/#"),"&scope=").concat(Qa,"&response_type=token"),Xa=a.p+"static/media/Startpage.2c2beade.png";a(112);var Wa=function(e){return Object(ma.jsxs)("div",{className:"start-view",children:[Object(ma.jsx)("img",{src:Xa,alt:"Listify logo"}),Object(ma.jsx)("div",{className:"login-btn-wrapper",children:Object(ma.jsx)(ga.a,{variant:"info",href:e.loginUrl,className:"login-btn",children:Object(ma.jsx)("i",{className:"fa fa-lg fa-spotify",children:"Login with Spotify"})})})]})};var qa={setSpotifyState:Ka.setSpotifyState},Za=Object(j.b)((function(e){return{token:e.auth.spotify.token}}),qa)((function(e){var t=e.token,a=Object(ia.g)(),n=Object(o.useState)(null),r=Object(ja.a)(n,2),s=r[0],c=r[1];return Object(o.useEffect)((function(){var t=function(e){var t=new Uint8Array((e||10)/2);return window.crypto.getRandomValues(t),Array.from(t,(function(e){return e.toString(16).padStart(2,"0")})).join("")}();c(t),e.setSpotifyState(t)}),[]),Object(o.useEffect)((function(){t&&a.push("/")}),[t]),Object(ma.jsx)(Wa,{loginUrl:"".concat(Ja,"&state=").concat(s)})}));var $a={saveSpotifyToken:Ka.saveSpotifyToken},en=Object(j.b)((function(e){return{token:e.auth.spotify.token,uid:e.fbase.uid}}),$a)((function(e){var t=e.uid;return Object(o.useEffect)((function(){var t=localStorage.getItem("spotifyToken"),a=localStorage.getItem("spotifyExpiration");t&&a&&(new Date(Date.parse(a)).getTime()<Date.now()?(localStorage.removeItem("spotifyToken"),localStorage.removeItem("spotifyExpiration"),sessionStorage.clear()):e.saveSpotifyToken(t))}),[]),t?Object(ma.jsxs)(ia.d,{children:[Object(ma.jsx)(ia.b,{path:"/access_token=:token(.*)&token_type=Bearer&expires_in=:expires_in(.*)&state=:state(.*)",component:za}),Object(ma.jsx)(ia.b,{path:"/error=:error(.*)&state=:state(.*)",component:za}),Object(ma.jsx)(ia.b,{exact:!0,path:"/login",component:Za}),Object(ma.jsx)(ia.b,{exact:!0,path:"/",component:Ba}),Object(ma.jsx)(ia.b,{path:"/*",render:function(){return Object(ma.jsx)(ia.a,{to:"/"})}})]}):Object(ma.jsx)(La,{size:"lg"})})),tn=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,121)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;a(e),n(e),r(e),s(e),c(e)}))};d.a.render(Object(ma.jsx)(u.a.StrictMode,{children:Object(ma.jsx)(j.a,{store:sa,children:Object(ma.jsx)(ca.a,{hashType:"noslash",children:Object(ma.jsx)(en,{})})})}),document.getElementById("root")),tn()}},[[113,1,2]]]);
//# sourceMappingURL=main.9d72a49e.chunk.js.map