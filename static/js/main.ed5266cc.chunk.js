(this["webpackJsonplistify-project"]=this["webpackJsonplistify-project"]||[]).push([[0],{100:function(e,t,a){},101:function(e,t,a){},104:function(e,t,a){},105:function(e,t,a){},106:function(e,t,a){},109:function(e,t,a){},110:function(e,t,a){"use strict";a.r(t);var n,r,s,c,i,o,l=a(0),u=a.n(l),b=a(35),j=a.n(b),p=a(28),d=a(41),O=a(3),f=a(11),h="AUTH_INIT_TEST",x="AUTH_SPOTIFY",m="AUTH_SPOTIFY_ERROR",y="AUTH_SPOTIFY_SET_STATE",g="AUTH_SPOTIFY_LOGOUT",v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(f.a)({type:e},t)},k=function(e,t){return function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,n=arguments.length>1?arguments[1]:void 0;return t.hasOwnProperty(n.type)?t[n.type](a,n):a}},_={status:null,spotify:{token:null,expires_in:0,spotify_string:null,error:null}},S=k(_,(n={},Object(O.a)(n,h,(function(e,t){return Object(f.a)(Object(f.a)({},e),{},{status:"OK"})})),Object(O.a)(n,x,(function(e,t){var a;return localStorage.setItem("spotifyToken",t.token),localStorage.setItem("spotifyExpiration",(a=3595,new Date(Date.now()+1e3*a)).toUTCString()),Object(f.a)(Object(f.a)({},e),{},{spotify:{token:t.token,expires_in:t.expires_in,spotify_string:e.spotify.spotify_string,error:null}})})),Object(O.a)(n,m,(function(e,t){return Object(f.a)(Object(f.a)({},e),{},{spotify:{token:null,expires_in:null,spotify_string:e.spotify.spotify_string,error:t.error}})})),Object(O.a)(n,y,(function(e,t){return localStorage.setItem("spotifyState",t.spotify_string),Object(f.a)(Object(f.a)({},e),{},{spotify:Object(f.a)(Object(f.a)({},e.spotify),{},{spotify_string:t.spotify_string})})})),Object(O.a)(n,g,(function(e,t){return localStorage.removeItem("spotifyToken"),localStorage.removeItem("spotifyExpiration"),Object(f.a)({},_)})),n)),T="FBASE_INIT",E="FBASE_INIT_COMPLETED",I="FBASE_AUTHENTICATE",P="FBASE_AUTHENTICATE_SUCCESS",w="FBASE_SET_UID",N="FBASE_SIGN_OUT",R="FBASE_SIGN_OUT_SUCCESS",L="FBASE_SIGN_OUT_ERROR",C={status:null,app:null,auth:null,uid:""},A=k(C,(r={},Object(O.a)(r,E,(function(e,t){return Object(f.a)(Object(f.a)({},e),{},{status:"OK",app:t.payload.app,auth:t.payload.auth})})),Object(O.a)(r,P,(function(e,t){return Object(f.a)(Object(f.a)({},e),{},{status:"OK"},t.payload)})),Object(O.a)(r,w,(function(e,t){return Object(f.a)(Object(f.a)({},e),{},{uid:t.uid})})),Object(O.a)(r,N,(function(e,t){return Object(f.a)({},C)})),Object(O.a)(r,R,(function(e,t){return Object(f.a)({},C)})),Object(O.a)(r,L,(function(e,t){return Object(f.a)(Object(f.a)({},C),{},{status:"ERROR"})})),r)),U="SEARCH_INIT_TEST",F="SEARCH_GET",D="SEARCH_GET_ERROR",G="SEARCH_GET_SUCCESS",K="SEARCH_NEXT",M="SEARCH_PREV",Y={status:null,latestQuery:null,activePage:null,isExact:!1,resultTypes:["track"]},V=k(Y,(s={},Object(O.a)(s,U,(function(e,t){return Object(f.a)(Object(f.a)({},e),{},{status:"initialized"})})),Object(O.a)(s,F,(function(e,t){return Object(f.a)(Object(f.a)({},e),{},{status:"Query accepted"})})),Object(O.a)(s,G,(function(e,t){return Object(f.a)(Object(f.a)({},e),{},{activePage:t.payload,status:"API OK"})})),Object(O.a)(s,D,(function(e,t){return Object(f.a)(Object(f.a)({},e),{},{activePage:Y.activePage,status:"API ERROR"})})),Object(O.a)(s,K,(function(e,t){return Object(f.a)(Object(f.a)({},e),{},{status:"Next Page Found"})})),Object(O.a)(s,M,(function(e,t){return Object(f.a)(Object(f.a)({},e),{},{status:"Prev Page Found"})})),s)),B="USER_INIT",H="USER_GET",z="USER_GET_SUCCESS",q="USER_GET_ERROR",X={status:null,id:null,display_name:null,country:null,error:null},W=k(X,(c={},Object(O.a)(c,B,(function(e,t){return Object(f.a)(Object(f.a)({},e),{},{status:"OK"})})),Object(O.a)(c,z,(function(e,t){return Object(f.a)(Object(f.a)(Object(f.a)({},e),t.payload),{},{error:null,status:"OK"})})),Object(O.a)(c,q,(function(e,t){return Object(f.a)(Object(f.a)({},e),{},{error:t.payload,status:"ERROR"})})),Object(O.a)(c,g,(function(e,t){return X})),c)),J=a(29),Q="PLAYLIST_MOVE_UP_SONG",Z="PLAYLIST_MOVE_DOWN_SONG",$="PLAYLIST_DELETE_FROM_LIST",ee="PLAYLIST_GET",te="PLAYLIST_TRACK_GET",ae="PLAYLIST_MOVE_UP_SONG_SUCCESS",ne="PLAYLIST_MOVE_UP_SONG_ERROR",re="PLAYLIST_MOVE_DOWN_SONG_SUCCESS",se="PLAYLIST_MOVE_DOWN_SONG_ERROR",ce="PLAYLIST_DELETE_FROM_LIST_SUCCESS",ie="PLAYLIST_DELETE_FROM_LIST_ERROR",oe="PLAYLIST_GET_SUCCESS",le="PLAYLIST_GET_ERROR",ue="PLAYLIST_TRACK_GET_SUCCESS",be="PLAYLIST_TRACK_GET_ERROR",je="PLAYLIST_TRACK_GET_ALL_DONE",pe="PLAYLIST_SELECT",de=k({status:null,error:null,selectedList:"",playlists:{},trackIndex:{},featureMaps:{},playlistsFetched:!1,tracksFetched:!1},(i={},Object(O.a)(i,oe,(function(e,t){var a={};return t.payload.playlists.forEach((function(e){a[e.id]={snapshot_id:e.snapshot_id,name:e.name,id:e.id,owner:e.owner.display_name||e.owner.id,description:e.description,image:e.images.length>=2&&e.images[1]||null,external_urls:e.external_urls,collaborative:e.collaborative,tracks:null}})),Object(f.a)(Object(f.a)({},e),{},{playlists:a,playlistsFetched:!0,selectedList:Object.values(a)[0].id,status:"Fetch Playlists Success"})})),Object(O.a)(i,le,(function(e,t){return Object(f.a)(Object(f.a)({},e),{},{error:t.payload,status:"ERROR"})})),Object(O.a)(i,ue,(function(e,t){var a=t.payload.playlist_id,n=t.payload.tracks.map((function(e){return e.id})),r=e.trackIndex;return t.payload.tracks.forEach((function(e){r.hasOwnProperty(e.id)||(r[e.id]=e)})),Object(f.a)(Object(f.a)({},e),{},{playlists:Object(f.a)(Object(f.a)({},e.playlists),{},Object(O.a)({},a,Object(f.a)(Object(f.a)({},e.playlists[a]),{},{tracks:n}))),trackIndex:Object(f.a)({},r)})})),Object(O.a)(i,be,(function(e,t){return Object(f.a)(Object(f.a)({},e),{},{error:t.payload,status:"ERROR"})})),Object(O.a)(i,je,(function(e,t){return Object(f.a)(Object(f.a)({},e),{},{tracksFetched:!0})})),Object(O.a)(i,ae,(function(e,t){var a=t.payload.snapshot_id,n=t.payload.CI;if(0===n)return e;var r=e.playlists[e.selectedList],s=r.tracks,c=s[n-1];return s[n-1]=s[n],s[n]=c,Object(f.a)(Object(f.a)({},e),{},{playlists:Object(f.a)(Object(f.a)({},e.playlists),{},Object(O.a)({},e.selectedList,Object(f.a)(Object(f.a)({},r),{},{snapshot_id:a,tracks:Object(J.a)(s)})))})})),Object(O.a)(i,ne,(function(e,t){return Object(f.a)(Object(f.a)({},e),{},{error:t.payload,status:"ERROR"})})),Object(O.a)(i,re,(function(e,t){var a=t.payload.snapshot_id,n=t.payload.CI,r=e.playlists[e.selectedList];if(n===r.tracks.length-1)return e;var s=r.tracks,c=s[n];return s[n]=s[n+1],s[n+1]=c,Object(f.a)(Object(f.a)({},e),{},{playlists:Object(f.a)(Object(f.a)({},e.playlists),{},Object(O.a)({},e.selectedList,Object(f.a)(Object(f.a)({},r),{},{snapshot_id:a,tracks:Object(J.a)(s)})))})})),Object(O.a)(i,se,(function(e,t){return Object(f.a)(Object(f.a)({},e),{},{error:t.payload,status:"ERROR"})})),Object(O.a)(i,ce,(function(e,t){var a=t.payload.snapshot_id,n=t.payload.CI,r=e.playlists[e.selectedList],s=r.tracks,c=s.slice(0,n).concat(s.slice(n+1,s.length));return Object(f.a)(Object(f.a)({},e),{},{playlists:Object(f.a)(Object(f.a)({},e.playlists),{},Object(O.a)({},e.selectedList,Object(f.a)(Object(f.a)({},r),{},{snapshot_id:a,tracks:c})))})})),Object(O.a)(i,ie,(function(e,t){return Object(f.a)(Object(f.a)({},e),{},{error:t.payload,status:"ERROR"})})),Object(O.a)(i,pe,(function(e,t){var a=t.playlistId;return Object(f.a)(Object(f.a)({},e),{},{selectedList:a})})),i)),Oe="PLAYLIST_ADD_TO_TRACKS",fe="TRACKS_SAVE_LOCATION",he="TRACKS_DELETE_LOCATIONS",xe=k({status:null,stash:[],selectedTrack:"",trackLocations:{},previewPlayer:{}},(o={},Object(O.a)(o,he,(function(e,t){var a=t.payload.playlistId,n=t.payload.trackId,r=e.trackLocations[n];return Object(f.a)(Object(f.a)({},e),{},{trackLocations:Object(f.a)(Object(f.a)({},e.trackLocations),{},Object(O.a)({},n,Object(f.a)(Object(f.a)({},r),{},Object(O.a)({},a,!1))))})})),Object(O.a)(o,Oe,(function(e,t){var a=t.trackId,n=[].concat(Object(J.a)(e.stash),[a]);return Object(f.a)(Object(f.a)({},e),{},{stash:n})})),Object(O.a)(o,fe,(function(e,t){var a=t.payload.playlist_id,n=t.payload.trackIds,r=e.trackLocations;return n.forEach((function(e){r.hasOwnProperty(e)||(r[e]={}),r[e][a]||(r[e][a]=!0)})),Object(f.a)(Object(f.a)({},e),{},{trackLocations:Object(f.a)({},r)})})),o)),me=Object(d.c)({auth:S,fbase:A,search:V,user:W,lists:de,tracks:xe}),ye=a(1),ge=a.n(ye),ve=a(12),ke=a(53),_e=ge.a.mark(Te),Se=ge.a.mark(Ee);function Te(){return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,Object(ve.h)(h);case 3:e.next=0;break;case 5:case"end":return e.stop()}}),_e)}function Ee(){return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ve.b)([Object(ve.j)(h,Te)]);case 2:case"end":return e.stop()}}),Se)}var Ie=Ee,Pe=a(82),we={apiKey:"AIzaSyD8zs9oK-BvtUICviOHLrVpcNOzbMvUR_k",authDomain:"listify-project-56d94.firebaseapp.com",databaseURL:"https://listify-project-56d94-default-rtdb.europe-west1.firebasedatabase.app",projectId:"listify-project-56d94",storageBucket:"listify-project-56d94.appspot.com",messagingSenderId:"108020178071",appId:"1:108020178071:web:b81127db0ed946e8abddd2"},Ne=a(38);a(70);function Re(e){return Object(Ne.e)(e).then((function(e){return{response:e}})).catch((function(e){return{error:e}}))}function Le(e){return Object(Ne.f)(e).then((function(e){return{response:e}})).catch((function(e){return{error:e}}))}var Ce=ge.a.mark(De),Ae=ge.a.mark(Ge),Ue=ge.a.mark(Ke),Fe=ge.a.mark(Me);function De(){var e,t;return ge.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(ve.c)(Pe.a,we);case 2:return e=a.sent,a.next=5,Object(ve.c)(Ne.c,e,{persistence:Ne.a,popupRedirectResolver:void 0});case 5:return t=a.sent,a.next=8,Object(ve.f)({type:E,payload:{app:e,auth:t}});case 8:case"end":return a.stop()}}),Ce)}function Ge(){var e,t,a,n;return ge.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e=Object(Ne.b)(),r.next=3,Object(ve.c)(Re,e);case 3:if(t=r.sent,a=t.response,!(n=t.error)){r.next=11;break}return r.next=9,Object(ve.f)({type:"FBASE_AUTHENTICATE_ERROR",payload:n});case 9:r.next=13;break;case 11:return r.next=13,Object(ve.f)({type:P,payload:Object(f.a)({},a)});case 13:case"end":return r.stop()}}),Ae)}function Ke(){var e,t;return ge.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return e=Object(Ne.b)(),a.next=3,Object(ve.f)({type:g});case 3:return a.next=5,Object(ve.c)(Le,e);case 5:if(t=a.sent,t.response,!t.error){a.next=13;break}return a.next=11,Object(ve.f)({type:L});case 11:a.next=15;break;case 13:return a.next=15,Object(ve.f)({type:R});case 15:case"end":return a.stop()}}),Ue)}function Me(){return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ve.b)([Object(ve.k)(T,De),Object(ve.j)(I,Ge),Object(ve.k)(N,Ke)]);case 2:case"end":return e.stop()}}),Fe)}var Ye=Me,Ve="https://api.spotify.com/v1",Be="PUT",He="DELETE";function ze(e){return e.json().then((function(t){if(!e.ok){var a=429===e.status?{retry_after:e.headers.get("retry-after")}:{},n=Object.assign(a,t,{status:e.status,statusText:e.statusText});return Promise.reject(n)}return t}))}var qe=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"application/json",s=t.startsWith("/")?t:"/"+t,c={Authorization:"Bearer "+e},i={method:a,headers:c};return 0!==Object.keys(n).length&&(i.body=JSON.stringify(n),c["Content-Type"]=r),fetch(Ve+s,i).then(ze).then((function(e){return{response:e}})).catch((function(e){return{error:e}}))},Xe=function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"&offset=0&limit=20",r="/search",s=a.reduce((function(e,t,a,n){return n.length-1!==a?e+t+",":e+t})),c="?q="+encodeURIComponent(t)+"&type="+encodeURIComponent(s)+"&market=from_token";return qe(e,r+c+n)},We=ge.a.mark($e),Je=ge.a.mark(et),Qe=ge.a.mark(tt),Ze=ge.a.mark(at);function $e(e){var t,a,n,r,s;return ge.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(ve.g)(nt);case 2:return t=c.sent,c.next=5,Object(ve.c)(Xe,e.token,e.query,t);case 5:if(a=c.sent,n=a.response,!(r=a.error)){c.next=13;break}return c.next=11,Object(ve.f)({type:D,payload:r.error});case 11:c.next=16;break;case 13:return s=n.tracks,c.next=16,Object(ve.f)({type:G,payload:s});case 16:case"end":return c.stop()}}),We)}function et(e){var t,a,n,r,s,c;return ge.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Object(ve.g)(rt);case 2:if(!(t=i.sent)){i.next=18;break}return a=t.slice(Ve.length),i.next=7,Object(ve.c)(qe,e.token,a);case 7:if(n=i.sent,r=n.response,!(s=n.error)){i.next=15;break}return i.next=13,Object(ve.f)({type:D,payload:s.error});case 13:i.next=18;break;case 15:return c=r.tracks,i.next=18,Object(ve.f)({type:G,payload:c});case 18:case"end":return i.stop()}}),Je)}function tt(e){var t,a,n,r,s,c;return ge.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Object(ve.g)(st);case 2:if(!(t=i.sent)){i.next=18;break}return a=t.slice(Ve.length),i.next=7,Object(ve.c)(qe,e.token,a);case 7:if(n=i.sent,r=n.response,!(s=n.error)){i.next=15;break}return i.next=13,Object(ve.f)({type:D,payload:s.error});case 13:i.next=18;break;case 15:return c=r.tracks,i.next=18,Object(ve.f)({type:G,payload:c});case 18:case"end":return i.stop()}}),Qe)}function at(){return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ve.b)([Object(ve.j)(F,$e),Object(ve.j)(K,et),Object(ve.j)(M,tt)]);case 2:case"end":return e.stop()}}),Ze)}var nt=function(e){return e.search.resultTypes},rt=function(e){return e.search.activePage.next},st=function(e){return e.search.activePage.previous},ct=at,it=function(e){return qe(e,"/me")},ot=ge.a.mark(ut),lt=ge.a.mark(bt);function ut(e){var t,a,n,r,s;return ge.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(ve.c)(it,e.token);case 2:if(t=c.sent,a=t.response,!(n=t.error)){c.next=12;break}return c.next=8,Object(ve.f)({type:N});case 8:return c.next=10,Object(ve.f)({type:q,payload:n.error});case 10:c.next=16;break;case 12:return s={id:(r=a).id,display_name:r.display_name,country:r.country},c.next=16,Object(ve.f)({type:z,payload:s});case 16:case"end":return c.stop()}}),ot)}function bt(){return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ve.b)([Object(ve.j)(H,ut)]);case 2:case"end":return e.stop()}}),lt)}var jt=bt,pt={moveUpSong:function(e,t,a,n){return v(Q,{token:e,playlistId:t,CI:a,snapshot_id:n})},moveDownSong:function(e,t,a,n){return v(Z,{token:e,playlistId:t,CI:a,snapshot_id:n})},deleteFromList:function(e,t,a,n,r,s){return v($,{token:e,playlistId:t,track_uri:a,snapshot_id:n,CI:r,trackId:s})},fetchPlaylists:function(e){return v(ee,{token:e})},fetchTrack:function(e,t){return v(te,{token:e,playlistId:t})},selectPlaylist:function(e){return v(pe,{playlistId:e})}},dt=function(e,t){return qe(e,"/me/playlists?offset="+t+"&limit=50")},Ot=function(e,t,a){return qe(e,"/playlists/"+t+"/tracks?market=from_token&offset="+a+"&limit=100")},ft=function(e,t,a,n,r){return qe(e,"/playlists/"+t+"/tracks",Be,{range_start:a,insert_before:n,snapshot_id:r})},ht=function(e,t,a,n){return qe(e,"/playlists/"+t+"/tracks",He,{tracks:a,snapshot_id:n})},xt=ge.a.mark(Tt),mt=ge.a.mark(Et),yt=ge.a.mark(It),gt=ge.a.mark(Pt),vt=ge.a.mark(wt),kt=ge.a.mark(Nt),_t=ge.a.mark(Rt),St=function(e){return e.auth.spotify.token};function Tt(e){var t,a,n,r,s,c,i,o;return ge.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,Object(ve.g)(St);case 2:return t=l.sent,a=e.playlistId,n=e.CI,r=e.CI-1,s=e.snapshot_id,l.next=9,Object(ve.c)(ft,t,a,n,r,s);case 9:if(c=l.sent,i=c.response,o=c.error,console.log(i),o){l.next=18;break}return l.next=16,Object(ve.f)({type:ae,payload:{CI:e.CI,snapshot_id:i.snapshot_id}});case 16:l.next=20;break;case 18:return l.next=20,Object(ve.f)({type:ne,payload:o.error});case 20:case"end":return l.stop()}}),xt)}function Et(e){var t,a,n,r,s,c,i,o;return ge.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,Object(ve.g)(St);case 2:return t=l.sent,a=e.playlistId,n=e.CI+1,r=e.CI,s=e.snapshot_id,l.next=9,Object(ve.c)(ft,t,a,n,r,s);case 9:if(c=l.sent,i=c.response,o=c.error){l.next=17;break}return l.next=15,Object(ve.f)({type:re,payload:{CI:e.CI,snapshot_id:i.snapshot_id}});case 15:l.next=19;break;case 17:return l.next=19,Object(ve.f)({type:se,payload:o.error});case 19:case"end":return l.stop()}}),mt)}function It(e){var t,a,n,r,s,c,i,o;return ge.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,Object(ve.g)(St);case 2:return t=l.sent,a=e.playlistId,n=e.snapshot_id,r=e.trackId,s=[{uri:e.track_uri,positions:[e.CI]}],l.next=9,Object(ve.c)(ht,t,a,s,n);case 9:if(c=l.sent,i=c.response,o=c.error){l.next=19;break}return l.next=15,Object(ve.f)({type:he,payload:{playlistId:a,trackId:r}});case 15:return l.next=17,Object(ve.f)({type:ce,payload:{CI:e.CI,snapshot_id:i.snapshot_id}});case 17:l.next=21;break;case 19:return l.next=21,Object(ve.f)({type:ie,payload:o.error});case 21:case"end":return l.stop()}}),yt)}function Pt(e){var t,a,n,r,s,c,i,o,l;return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ve.g)(St);case 2:return t=e.sent,a=0,e.next=6,Object(ve.c)(dt,t,a);case 6:if(s=e.sent,n=s.response,!(r=s.error)){e.next=15;break}if(401!==r.status){e.next=13;break}return e.next=13,Object(ve.f)({type:N});case 13:e.next=43;break;case 15:c=n.total,i=c>50,o=n.items;case 18:if(!i||r){e.next=36;break}return a+=20,e.next=22,Object(ve.c)(dt,t,a);case 22:if(l=e.sent,n=l.response,r=l.error){e.next=29;break}o=o.concat(n.items),e.next=33;break;case 29:if(429!==r.status){e.next=33;break}return a-=50,e.next=33,Object(ve.d)(1e3*r.retry_after);case 33:i=c>a+50,e.next=18;break;case 36:if(r){e.next=41;break}return e.next=39,Object(ve.f)({type:oe,payload:{playlists:o}});case 39:e.next=43;break;case 41:return e.next=43,Object(ve.f)({type:le,payload:r.error});case 43:case"end":return e.stop()}}),gt)}function wt(e){var t,a,n,r,s,c,i,o,l,u,b,j;return ge.a.wrap((function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,Object(ve.g)(St);case 2:return t=p.sent,a=e.playlistId,n=0,p.next=7,Object(ve.c)(Ot,t,a,n);case 7:if(c=p.sent,r=c.response,!(s=c.error)){p.next=14;break}console.log(s),p.next=49;break;case 14:i=r.total,o=i>100,l=r.items;case 17:if(!o||s){p.next=38;break}return n+=100,p.next=21,Object(ve.c)(Ot,t,a,n);case 21:if(u=p.sent,r=u.response,s=u.error){p.next=28;break}l=l.concat(r.items),p.next=35;break;case 28:if(429!==s.status){p.next=34;break}return n-=100,p.next=32,Object(ve.d)(1e3*s.retry_after);case 32:p.next=35;break;case 34:console.error(s);case 35:o=i>n+100,p.next=17;break;case 38:if(s){p.next=47;break}return b=l.filter((function(e){return!e.is_local})).map((function(e){var t=e.track;return{album_name:t.album.name,album_image:t.album.images.length>=2&&t.album.images[1]||null,artists:t.artists.map((function(e){return e.name})),is_local:t.is_local,external_urls:t.external_urls,name:t.name,id:t.id,preview_url:t.preview_url,uri:t.uri,duration:t.duration_ms}})),j=r.items.map((function(e){return e.track.id})),p.next=43,Object(ve.f)({type:ue,payload:{playlist_id:a,tracks:b}});case 43:return p.next=45,Object(ve.f)({type:fe,payload:{playlist_id:a,trackIds:j}});case 45:p.next=49;break;case 47:return p.next=49,Object(ve.f)({type:be,payload:s.error});case 49:case"end":return p.stop()}}),vt)}function Nt(){var e,t,a,n;return ge.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e=ke.a.expanding(10),r.next=3,Object(ve.a)(te,e);case 3:t=r.sent,a=!1;case 5:if(a&&e.isEmpty()){r.next=14;break}return r.next=8,Object(ve.h)(t);case 8:return n=r.sent,r.next=11,Object(ve.c)(wt,n);case 11:a=!0,r.next=5;break;case 14:return r.next=16,Object(ve.f)({type:je});case 16:case"end":return r.stop()}}),kt)}function Rt(){return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ve.b)([Object(ve.i)(Q,Tt),Object(ve.i)(Z,Et),Object(ve.k)($,It),Object(ve.k)(ee,Pt),Object(ve.e)(Nt)]);case 2:case"end":return e.stop()}}),_t)}var Lt=Rt,Ct={deleteFromList:function(e){return v(he,{playlistId:e})},addToTracks:function(e){return v(Oe,{trackId:e})}},At=ge.a.mark(Ut);function Ut(e){return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ve.b)([]);case 2:case"end":return e.stop()}}),At)}var Ft=Ut,Dt=ge.a.mark(Gt);function Gt(){return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ve.c)(ke.b);case 2:return e.sent,e.next=5,Object(ve.e)(Ie);case 5:return e.next=7,Object(ve.e)(Ye);case 7:return e.next=9,Object(ve.e)(ct);case 9:return e.next=11,Object(ve.e)(jt);case 11:return e.next=13,Object(ve.e)(Lt);case 13:return e.next=15,Object(ve.e)(Ft);case 15:case"end":return e.stop()}}),Dt)}window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__();var Kt=Object(ke.c)(),Mt=Object(d.e)(me,Object(d.a)(Kt));Kt.run(Gt);var Yt=a(75),Vt=(a(98),a(24)),Bt=(a(99),a(20)),Ht=(a(100),a(116)),zt=a(117),qt=a(40),Xt=a.p+"static/media/LOGO.846060d1.svg",Wt=a(79),Jt={initSearch:function(){return v(U)},getSearchResults:function(e,t){return v(F,{token:e,query:t})},getNextPage:function(e){return v(K,{token:e})},getPreviousPage:function(e){return v(M,{token:e})}},Qt=(a(101),a(54)),Zt=a.p+"static/media/Search.8d2bd43b.svg",$t=a(4);var ea=function(e){return Object($t.jsxs)("div",{className:"searchview",children:[Object($t.jsx)("img",{alt:"",src:Xt,className:"bg"})," ",Object($t.jsxs)("div",{className:"searchcontainer",children:[Object($t.jsx)("h6",{children:"Listify helps you manage and find inspiration for your playlists"}),Object($t.jsxs)("div",{className:"s-searchbar",children:[Object($t.jsx)("form",{className:"s-searchinput",children:Object($t.jsx)(Qt.a.Group,{controlId:"formSearchInput",children:Object($t.jsx)(Qt.a.Control,{autoFocus:e.tabVisible,type:"text",placeholder:"Search for a song, an artist, or an album...",onChange:function(t){return e.onSearch(t.target.value)}})})}),Object($t.jsx)("img",{alt:"",src:Zt})," "]})]})]})},ta=(a(104),a(62)),aa=a(50),na=a(67),ra=a.p+"static/media/Spotify_Icon.cd66b8f6.png",sa=a.p+"static/media/Inboxes fill.043f2be9.svg";var ca=function(e){return Object($t.jsx)("div",{className:"searchresultview",children:Object($t.jsxs)("div",{className:"searchresultcontainer",children:[Object($t.jsxs)("div",{className:"sr-searchbar",children:[Object($t.jsx)("form",{className:"sr-searchinput",children:Object($t.jsx)(Qt.a.Group,{controlId:"formSearchInput",children:Object($t.jsx)(Qt.a.Control,{autoFocus:e.tabVisible,defaultValue:e.search,type:"text",placeholder:"Search for a song, an artist or an album",onChange:function(t){return e.onSearch(t.target.value)}})})}),Object($t.jsx)("img",{alt:"search icon",src:Zt})]}),Object($t.jsx)(ta.a,{size:"sm",children:Object($t.jsx)("thead",{children:Object($t.jsxs)("tr",{children:[Object($t.jsx)("th",{class:"th-index",children:" "}),Object($t.jsx)("th",{class:"th-songname text-muted",children:"Name "}),Object($t.jsx)("th",{class:"th-songartist text-muted",children:"Artist"}),Object($t.jsx)("th",{class:"th-songalbum text-muted",children:"Album"}),Object($t.jsx)("th",{class:"th-actions text-muted",children:"Actions"})]})})}),Object($t.jsxs)("div",{className:"resultscontainer",children:[e.results.map((function(e,t){return Object($t.jsxs)("div",{className:"songitem",children:[Object($t.jsx)("span",{className:"cd-preview fake-button",onClick:function(){return console.log(t)},children:Object($t.jsx)("i",{class:"fas fa-play-circle"})}),Object($t.jsx)("div",{className:"cd-cover",children:Object($t.jsx)("img",{alt:"song album cover",className:"songitem-cover",src:e.image})}),Object($t.jsx)(na.a,{children:Object($t.jsxs)("div",{className:"cardcontent",children:[Object($t.jsx)("p",{className:"cd-name text-muted",children:e.track}),Object($t.jsxs)("p",{className:"cd-artist text-muted",children:[Object($t.jsx)("i",{class:"fas fa-user"}),e.artist]}),Object($t.jsxs)("p",{className:"cd-album text-muted",children:[Object($t.jsx)("i",{class:"fas fa-record-vinyl"}),e.album]}),Object($t.jsxs)("div",{className:"cd-Actions",children:[Object($t.jsx)(aa.a,{variant:"light",onClick:function(){return console.log(t)},children:Object($t.jsx)("img",{alt:"remove from track stash",src:sa})}),Object($t.jsx)("a",{href:e.spotifyUrl,children:Object($t.jsx)("img",{alt:"open song in Spotify",src:ra,className:"openinspotify"})})]})]})})]},t)})),Object($t.jsx)("div",{className:"Pagenav",children:Object($t.jsxs)("nav",{children:[Object($t.jsxs)("ul",{class:"pagination",children:[Object($t.jsx)("li",{class:1===e.currentPage?"page-item disabled":"page-item",children:Object($t.jsxs)("span",{class:"page-link","aria-label":"Previous",onClick:e.onPrevPage,disabled:1===e.currentPage,children:[Object($t.jsx)("span",{"aria-hidden":"true"}),Object($t.jsx)("span",{class:"sr-only",children:"Previous"}),"Previous"]})}),Object($t.jsx)("li",{class:e.currentPage===e.numPages?"page-item disabled":"page-item",children:Object($t.jsxs)("span",{class:"page-link","aria-label":"Next",onClick:e.onNextPage,disabled:e.currentPage===e.numPages,children:[Object($t.jsx)("span",{"aria-hidden":"true"}),Object($t.jsx)("span",{class:"sr-only",children:"Next"}),"Next"]})})]}),Object($t.jsxs)("p",{children:["Page ",e.currentPage," out of ",e.numPages]})]})})]})]})})};var ia={getSearchResults:Jt.getSearchResults,getNextPage:Jt.getNextPage,getPreviousPage:Jt.getPreviousPage},oa=Object(p.b)((function(e){var t=e.search.activePage&&e.search.activePage.total||0,a=[];return e.search.activePage&&(a=e.search.activePage.items.map((function(e){var t=e.artists.reduce((function(e,t,a,n){return n.length-1!==a?e+t.name+", ":e+t.name}),""),a=e.album.images.reduce((function(e,t){return t.height<e.height?t:e}),e.album.images[0]),n=Math.floor(e.duration_ms/1e3/60),r=Math.round((e.duration_ms-1e3*n*60)/1e3);return{artist:t,album:e.album.name,track:e.name,spotifyUrl:e.external_urls.spotify,image:a.url,duration:n+":"+r,previewSong:e.preview_url}}))),{totalResults:t,results:a,token:e.auth.spotify.token}}),ia)((function(e){var t=Object(l.useState)(""),a=Object(Vt.a)(t,2),n=a[0],r=a[1],s=e.token;Object(l.useEffect)((function(){n&&e.getSearchResults(s,n)}),[n]);var c=Object(l.useState)(!1),i=Object(Vt.a)(c,2),o=i[0],u=i[1];Object(l.useEffect)((function(){var e=new MutationObserver((function(){var e=document.querySelector("#left-tabs-example-tab-search");u(e&&e.classList.contains("active"))})),t=document.querySelector("#left-tabs-example-tab-search");return e.observe(t,{attributes:!0}),function(){return e.disconnect(t)}}),[]),Object(l.useEffect)((function(){o&&document.getElementById("formSearchInput").focus()}),[o]);var b=Object(l.useState)(1),j=Object(Vt.a)(b,2),p=j[0],d=j[1],O=Math.ceil(e.totalResults/20);return n?Object($t.jsx)(ca,{onSearch:function(e){return r(e)},search:n,results:e.results,currentPage:p,numPages:O,onNextPage:function(){!function(e,t,a){e!==t&&a(e+1)}(p,O,d),e.getNextPage(s)},onPrevPage:function(){!function(e,t){0!==e&&t(e-1)}(p,d),e.getPreviousPage(s)},tabVisible:o}):Object($t.jsx)(ea,{onSearch:function(e){return r(e)},tabVisible:o})})),la=(a(105),a(115));var ua=function(e){return Object($t.jsxs)("div",{className:"playlistview",children:[Object($t.jsx)("div",{className:"playlistsnav",children:e.allPlaylists.map((function(t,a){return Object($t.jsxs)("div",{className:e.selectedPlaylist&&e.selectedPlaylist===t.id||!e.selectedPlaylist&&0===a?"selectedplaylist":"unselectedplaylist",onClick:function(){return e.onSelectPlaylist(t.id)},children:[Object($t.jsx)("img",{className:t.image?"":"no-img",alt:"playlists",src:t.image?t.image.url:Xt}),Object($t.jsx)("p",{class:"h6 text-light",children:t.name})]},a)}))}),Object($t.jsxs)("div",{className:"playlistcontent",children:[Object($t.jsxs)("div",{className:"playlistbanner",children:[Object($t.jsx)("img",{alt:"selected playlist",className:e.playlist.image?"":"no-img",src:e.playlist.image?e.playlist.image.url:Xt}),Object($t.jsxs)("div",{className:"playlistinfo",children:[Object($t.jsx)("div",{className:" h4 text-light",children:e.playlist.name}),Object($t.jsx)("p",{className:" md text-light",children:e.playlist.description}),Object($t.jsxs)("form",{className:"actionsbar",children:[Object($t.jsx)("div",{class:"form-group",children:Object($t.jsx)("input",{type:"email",class:"form-control",id:"PlaylistSearchAction",placeholder:"search for a song",defaultValue:e.searchTerm,onChange:function(t){return e.onSearchTerm(t.target.value)}})}),Object($t.jsx)("div",{className:"form-group",children:Object($t.jsxs)("select",{class:"form-control",id:"PlaylistSortAction",placeholder:"Sort",children:[Object($t.jsx)("option",{children:"song"}),Object($t.jsx)("option",{children:"artist"}),Object($t.jsx)("option",{children:"album"})]})})]})]})]}),Object($t.jsx)(ta.a,{className:"p-tabletitle",size:"sm",children:Object($t.jsx)("thead",{children:Object($t.jsxs)("tr",{children:[Object($t.jsx)("th",{children:"#"}),Object($t.jsx)("th",{children:"Actions"})]})})}),Object($t.jsx)("div",{className:"songscontainer",children:e.tracks.map((function(t,a){return Object($t.jsxs)("div",{className:"p-songitem",children:[Object($t.jsx)("h6",{children:a+1}),Object($t.jsx)("img",{className:"p-songcover",alt:"song album cover",src:t.image?t.image.url:Xt,width:"48px",height:"48px"}),Object($t.jsx)(na.a,{borderless:"1",children:Object($t.jsxs)("div",{className:"p-cardbody",children:[Object($t.jsxs)("div",{className:"p-cardcontent",children:[Object($t.jsx)("div",{className:"p-songname",children:t.name}),Object($t.jsxs)("div",{className:"p-songartist",children:[Object($t.jsx)("i",{className:"fas fa-user"}),t.artist]}),Object($t.jsxs)("div",{className:"p-songalbum",children:[Object($t.jsx)("i",{className:"fas fa-record-vinyl"}),t.album_name]})]}),Object($t.jsxs)("div",{className:"p-actions",children:[Object($t.jsx)("button",{className:"trackmarked",onClick:function(){return e.onAddToTracks(a)},children:Object($t.jsx)("img",{alt:"add to track stash",src:sa})}),Object($t.jsxs)(la.a,{children:[Object($t.jsx)("button",{disabled:!e.actionsDisabled,onClick:function(){return e.onMoveUpSong(a)},children:Object($t.jsx)("i",{class:"far fa-arrow-alt-circle-up"})}),Object($t.jsx)("button",{disabled:!e.actionsDisabled,onClick:function(){return e.onMoveDownSong(a)},children:Object($t.jsx)("i",{class:"far fa-arrow-alt-circle-down"})}),Object($t.jsx)("button",{disabled:!e.actionsDisabled,onClick:function(){return e.onDeleteSong(a)},children:Object($t.jsx)("i",{class:"far fa-minus-square"})})]})]})]})})]},a)}))})]})]})};a(106);var ba=function(e){var t=e.size,a="xs"===t?"loading-view-xs":"sm"===t?"loading-view-sm":"md"===t?"loading-view-md":"loading-view-lg";return Object($t.jsx)("div",{className:"loading-view "+a,children:Object($t.jsxs)("div",{className:"lds-ring",children:[Object($t.jsx)("div",{}),Object($t.jsx)("div",{}),Object($t.jsx)("div",{})]})})},ja=a(86);var pa={fetchPlaylists:pt.fetchPlaylists,fetchTracks:pt.fetchTrack,selectPlaylist:pt.selectPlaylist,moveUpSong:pt.moveUpSong,moveDownSong:pt.moveDownSong,deleteFromList:pt.deleteFromList,addToTracks:Ct.addToTracks},da=Object(p.b)((function(e){var t=null,a=null,n=null;return e.lists.playlistsFetched&&((t=e.lists.selectedList?e.lists.playlists[e.lists.selectedList]:Object.values(e.lists.playlists)[0]).tracks&&(n=t.tracks.map((function(t){var a=e.lists.trackIndex[t],n=a.artists.reduce((function(e,t,a,n){return n.length-1!==a?e+t+", ":e+t}),""),r=Math.floor(a.duration/1e3/60),s=Math.round((a.duration-1e3*r*60)/1e3);return{name:a.name,album_name:a.album_name,artist:n,spotifyUrl:a.external_urls,duration:r+":"+s,previewSong:a.preview_url,image:a.album_image,uri:a.uri}}))),a=Object.values(e.lists.playlists).map((function(e){return{name:e.name,image:e.image,id:e.id}}))),{token:e.auth.spotify.token,selectedPlaylist:e.lists.selectedList,playlists:e.lists.playlists,playlist:t,playlistsFetched:e.lists.playlistsFetched,tracksFetched:e.lists.tracksFetched,playlistTracks:n,allPlaylists:a}}),pa)((function(e){var t=e.token,a=e.playlists,n=e.playlistsFetched,r=e.tracksFetched,s=e.playlist,c=e.playlistTracks,i=e.allPlaylists,o=e.selectedPlaylist;Object(l.useEffect)((function(){e.fetchPlaylists(t)}),[]),Object(l.useEffect)((function(){n&&0!==Object.keys(a).length&&!r&&Object.values(a).forEach((function(a){a.tracks||e.fetchTracks(t,a.id)}))}),[n]);var u=Object(l.useState)(""),b=Object(Vt.a)(u,2),j=b[0],p=b[1],d=Object(l.useState)(c),O=Object(Vt.a)(d,2),f=O[0],h=O[1];return Object(l.useEffect)((function(){if(j){var e=new ja.a(c,["name","artist","album_name"],{caseSensitive:!1});h(e.search(j)),console.log(f)}else c&&h(c)}),[j,c]),s&&a&&f&&i&&c&&r?Object($t.jsx)(ua,{onSelectPlaylist:function(t){return e.selectPlaylist(t)},onMoveUpSong:function(a){return e.moveUpSong(t,s.id,a,s.snapshot_id)},onMoveDownSong:function(a){return e.moveDownSong(t,s.id,a,s.snapshot_id)},onDeleteSong:function(a){return e.deleteFromList(t,s.id,c[a].uri,s.snapshot_id,a,s.tracks[a])},tracks:f,allPlaylists:i,playlist:s,selectedPlaylist:o,onAddToTracks:function(t){return e.addToTracks(s.tracks[t])},onSearchTerm:function(e){return p(e)},searchTerm:j,actionsDisabled:0==j}):Object($t.jsx)(ba,{})}));var Oa=function(e){return Object($t.jsx)("div",{className:"authorized-view",children:Object($t.jsxs)(Ht.a.Container,{id:"left-tabs-example",defaultActiveKey:"playlist",children:[Object($t.jsxs)(qt.a,{className:"navbar",children:[Object($t.jsxs)(qt.a,{variant:"tabs",className:"mr-auto",id:"nav-container",children:[Object($t.jsx)(qt.a.Item,{children:Object($t.jsx)(qt.a.Link,{eventKey:"playlist",children:"Playlist"})}),Object($t.jsx)(qt.a.Item,{children:Object($t.jsx)(qt.a.Link,{eventKey:"search",children:"Search"})}),Object($t.jsx)(qt.a.Item,{children:Object($t.jsx)(qt.a.Link,{eventKey:"tracks",children:"Tracks"})})]}),Object($t.jsxs)(qt.a,{children:[Object($t.jsx)(Wt.a,{title:e.username,children:Object($t.jsx)(Wt.a.Item,{onClick:e.logout,eventKey:"1",children:"Sign Out"})}),Object($t.jsx)(zt.a.Brand,{children:Object($t.jsx)("img",{id:"listify-logo",src:Xt,alt:"Logo",height:"30",width:"30"})})]})]}),Object($t.jsxs)(Ht.a.Content,{children:[Object($t.jsx)(Ht.a.Pane,{eventKey:"search",children:Object($t.jsx)(oa,{})}),Object($t.jsx)(Ht.a.Pane,{eventKey:"playlist",children:Object($t.jsx)(da,{})}),Object($t.jsx)(Ht.a.Pane,{eventKey:"tracks",children:Object($t.jsx)("p",{children:"Tracksview"})})]})]})})},fa={initFbase:function(){return v(T)},authFbase:function(){return v(I)},setUid:function(e){return v(w,{uid:e})},logout:function(){return v(N)}};var ha={fetchSpotifyUser:{initUser:function(){return v(B)},fetchUser:function(e){return v(H,{token:e})}}.fetchUser,logout:fa.logout},xa=Object(p.b)((function(e){return{token:e.auth.spotify.token,user:e.user}}),ha)((function(e){var t=e.token,a=e.user,n=Object(Bt.g)();return t||n.push("/login"),Object(l.useEffect)((function(){t&&e.fetchSpotifyUser(t)}),[t]),a?Object($t.jsx)(Oa,{username:a.display_name||a.id||"",logout:function(){return e.logout()}}):Object($t.jsx)(ba,{size:"lg"})})),ma={initAuth:function(){return v(h)},saveSpotifyToken:function(e,t,a){return v(x,{token:e,expires_in:t,spotify_string:a})},saveSpotifyTokenError:function(e){return v(m,{error:e})},setSpotifyState:function(e){return v(y,{spotify_string:e})}};var ya={saveSpotifyToken:ma.saveSpotifyToken,saveSpotifyTokenError:ma.saveSpotifyTokenError},ga=Object(p.b)((function(e){return{auth:e.auth}}),ya)((function(e){var t=Object(Bt.g)(),a=Object(Bt.h)();return a.state&&a.state===localStorage.getItem("spotifyState")||(console.error("Faulty URL parameter 'state' for login attempt."),t.push("/login")),localStorage.removeItem("spotifyState"),a.error&&(e.saveSpotifyTokenError(a.error),t.push("/login")),a.token&&a.expires_in&&e.saveSpotifyToken(a.token,a.expires_in),Object($t.jsx)("div",{})}));var va=encodeURIComponent(["ugc-image-upload","playlist-modify-public","playlist-modify-private","playlist-read-private","playlist-read-collaborative","user-read-private"].reduce((function(e,t,a){return 0!==a?e+" "+t:t}))),ka="https://accounts.spotify.com/authorize?client_id=".concat("c0e19491232e4cadbff0efd339179f6d","&redirect_uri=").concat(encodeURIComponent("https://martinfalke.github.io/spotify-project/#"),"&scope=").concat(va,"&response_type=token");a(109);var _a=function(e){return Object($t.jsxs)("div",{className:"start-view",children:[Object($t.jsx)("img",{src:Xt,alt:"Listify logo"}),Object($t.jsx)("div",{className:"login-btn-wrapper",children:Object($t.jsx)(aa.a,{variant:"info",href:e.loginUrl,className:"login-btn",children:Object($t.jsx)("i",{className:"fa fa-lg fa-spotify",children:"Login with Spotify"})})})]})};var Sa={setSpotifyState:ma.setSpotifyState},Ta=Object(p.b)((function(e){return{token:e.auth.spotify.token}}),Sa)((function(e){var t=e.token,a=Object(Bt.g)(),n=Object(l.useState)(null),r=Object(Vt.a)(n,2),s=r[0],c=r[1];return Object(l.useEffect)((function(){var t=function(e){var t=new Uint8Array((e||10)/2);return window.crypto.getRandomValues(t),Array.from(t,(function(e){return e.toString(16).padStart(2,"0")})).join("")}();c(t),e.setSpotifyState(t)}),[]),Object(l.useEffect)((function(){t&&a.push("/")}),[t]),Object($t.jsx)(_a,{loginUrl:"".concat(ka,"&state=").concat(s)})}));var Ea={initFirebase:fa.initFbase,authenticateFirebase:fa.authFbase,setUid:fa.setUid,saveSpotifyToken:ma.saveSpotifyToken},Ia=Object(p.b)((function(e){return{token:e.auth.spotify.token,fbaseApp:e.fbase.app,fbaseAuth:e.fbase.auth,fbaseUid:e.fbase.uid}}),Ea)((function(e){var t=e.fbaseApp,a=e.fbaseAuth,n=e.fbaseUid,r=e.token,s=Object(l.useState)(!1),c=Object(Vt.a)(s,2),i=c[0],o=c[1],u=Object(Bt.g)();return Object(l.useEffect)((function(){if(i){if(t&&a){0===sessionStorage.length&&e.authenticateFirebase();var s=localStorage.getItem("spotifyToken"),c=localStorage.getItem("spotifyExpiration");s&&c?new Date(Date.parse(c)).getTime()<Date.now()?(localStorage.removeItem("spotifyToken"),localStorage.removeItem("spotifyExpiration"),sessionStorage.clear(),r||u.push("/login")):r||e.saveSpotifyToken(s):r||(sessionStorage.clear(),u.push("/login")),Object(Ne.d)(a,(function(t){t&&!n&&e.setUid(t.uid)}))}}else o(!0),e.initFirebase()}),[a,r]),Object($t.jsxs)(Bt.d,{children:[Object($t.jsx)(Bt.b,{path:"/access_token=:token(.*)&token_type=Bearer&expires_in=:expires_in(.*)&state=:state(.*)",component:ga}),Object($t.jsx)(Bt.b,{path:"/error=:error(.*)&state=:state(.*)",component:ga}),Object($t.jsx)(Bt.b,{exact:!0,path:"/login",component:Ta}),Object($t.jsx)(Bt.b,{exact:!0,path:"/",component:xa}),Object($t.jsx)(Bt.b,{path:"/*",render:function(){return Object($t.jsx)(Bt.a,{to:"/"})}})]})})),Pa=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,118)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;a(e),n(e),r(e),s(e),c(e)}))};j.a.render(Object($t.jsx)(u.a.StrictMode,{children:Object($t.jsx)(p.a,{store:Mt,children:Object($t.jsx)(Yt.a,{hashType:"noslash",children:Object($t.jsx)(Ia,{})})})}),document.getElementById("root")),Pa()},98:function(e,t,a){},99:function(e,t,a){}},[[110,1,2]]]);
//# sourceMappingURL=main.ed5266cc.chunk.js.map